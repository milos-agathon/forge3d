

<!DOCTYPE html>
<html class="writer-html5" lang="en" data-content_root="./">
<head>
  <meta charset="utf-8" /><meta name="viewport" content="width=device-width, initial-scale=1" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>SDF (Signed Distance Functions) Documentation &mdash; forge3d Documentation</title>
      <link rel="stylesheet" type="text/css" href="_static/pygments.css?v=b86133f3" />
      <link rel="stylesheet" type="text/css" href="_static/css/theme.css?v=e59714d7" />
      <link rel="stylesheet" type="text/css" href="_static/custom.css" />

  
      <script src="_static/jquery.js?v=5d32c60e"></script>
      <script src="_static/_sphinx_javascript_frameworks_compat.js?v=2cd50e6c"></script>
      <script src="_static/documentation_options.js?v=9e420a66"></script>
      <script src="_static/doctools.js?v=9bcbadda"></script>
      <script src="_static/sphinx_highlight.js?v=dc90522c"></script>
    <script src="_static/js/theme.js"></script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search"  style="background: #2980B9" >

          
          
          <a href="index.html" class="icon icon-home">
            forge3d
          </a>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <p class="caption" role="heading"><span class="caption-text">Getting Started:</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="quickstart.html">Quick Start Guide</a><ul>
<li class="toctree-l2"><a class="reference internal" href="quickstart.html#installation">Installation</a></li>
<li class="toctree-l2"><a class="reference internal" href="quickstart.html#basic-triangle-rendering">Basic Triangle Rendering</a></li>
<li class="toctree-l2"><a class="reference internal" href="quickstart.html#terrain-visualization">Terrain Visualization</a></li>
<li class="toctree-l2"><a class="reference internal" href="quickstart.html#vector-graphics">Vector Graphics</a></li>
<li class="toctree-l2"><a class="reference internal" href="quickstart.html#device-detection">Device Detection</a></li>
<li class="toctree-l2"><a class="reference internal" href="quickstart.html#what-s-next">What’s Next?</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="installation.html">Installation Guide</a><ul>
<li class="toctree-l2"><a class="reference internal" href="installation.html#quick-installation">Quick Installation</a></li>
<li class="toctree-l2"><a class="reference internal" href="installation.html#system-requirements">System Requirements</a></li>
<li class="toctree-l2"><a class="reference internal" href="installation.html#installation-from-source">Installation from Source</a></li>
<li class="toctree-l2"><a class="reference internal" href="installation.html#virtual-environment-setup">Virtual Environment Setup</a></li>
<li class="toctree-l2"><a class="reference internal" href="installation.html#verification">Verification</a></li>
<li class="toctree-l2"><a class="reference internal" href="installation.html#troubleshooting">Troubleshooting</a></li>
<li class="toctree-l2"><a class="reference internal" href="installation.html#development-setup">Development Setup</a></li>
<li class="toctree-l2"><a class="reference internal" href="installation.html#docker-installation">Docker Installation</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="examples_guide.html">Examples Guide</a><ul>
<li class="toctree-l2"><a class="reference internal" href="examples_guide.html#basic-examples">Basic Examples</a></li>
<li class="toctree-l2"><a class="reference internal" href="examples_guide.html#diagnostic-examples">Diagnostic Examples</a></li>
<li class="toctree-l2"><a class="reference internal" href="examples_guide.html#advanced-examples-r13">Advanced Examples (R13)</a></li>
<li class="toctree-l2"><a class="reference internal" href="examples_guide.html#performance-examples">Performance Examples</a></li>
<li class="toctree-l2"><a class="reference internal" href="examples_guide.html#running-examples">Running Examples</a></li>
<li class="toctree-l2"><a class="reference internal" href="examples_guide.html#understanding-example-output">Understanding Example Output</a></li>
<li class="toctree-l2"><a class="reference internal" href="examples_guide.html#example-development-guidelines">Example Development Guidelines</a></li>
</ul>
</li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Core Documentation:</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="api_reference.html">API Reference</a><ul>
<li class="toctree-l2"><a class="reference internal" href="api_reference.html#core-classes">Core Classes</a><ul>
<li class="toctree-l3"><a class="reference internal" href="api_reference.html#renderer">Renderer</a></li>
<li class="toctree-l3"><a class="reference internal" href="api_reference.html#scene">Scene</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="api_reference.html#vector-graphics">Vector Graphics</a><ul>
<li class="toctree-l3"><a class="reference internal" href="api_reference.html#polygons">Polygons</a></li>
<li class="toctree-l3"><a class="reference internal" href="api_reference.html#lines">Lines</a></li>
<li class="toctree-l3"><a class="reference internal" href="api_reference.html#points">Points</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="api_reference.html#terrain-rendering">Terrain Rendering</a><ul>
<li class="toctree-l3"><a class="reference internal" href="api_reference.html#height-data-processing">Height Data Processing</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="api_reference.html#memory-management">Memory Management</a><ul>
<li class="toctree-l3"><a class="reference internal" href="api_reference.html#gpu-memory-tracking">GPU Memory Tracking</a></li>
<li class="toctree-l3"><a class="reference internal" href="api_reference.html#budget-management">Budget Management</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="api_reference.html#advanced-features">Advanced Features</a><ul>
<li class="toctree-l3"><a class="reference internal" href="api_reference.html#shadow-mapping">Shadow Mapping</a></li>
<li class="toctree-l3"><a class="reference internal" href="api_reference.html#pbr-materials">PBR Materials</a></li>
<li class="toctree-l3"><a class="reference internal" href="api_reference.html#async-readback">Async Readback</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="api_reference.html#utilities">Utilities</a><ul>
<li class="toctree-l3"><a class="reference internal" href="api_reference.html#device-information">Device Information</a></li>
<li class="toctree-l3"><a class="reference internal" href="api_reference.html#environment-reporting">Environment Reporting</a></li>
<li class="toctree-l3"><a class="reference internal" href="api_reference.html#color-management">Color Management</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="api_reference.html#configuration">Configuration</a><ul>
<li class="toctree-l3"><a class="reference internal" href="api_reference.html#environment-variables">Environment Variables</a></li>
<li class="toctree-l3"><a class="reference internal" href="api_reference.html#gpu-backend-selection">GPU Backend Selection</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="api_reference.html#error-handling">Error Handling</a><ul>
<li class="toctree-l3"><a class="reference internal" href="api_reference.html#common-exceptions">Common Exceptions</a></li>
<li class="toctree-l3"><a class="reference internal" href="api_reference.html#debugging-tips">Debugging Tips</a></li>
<li class="toctree-l3"><a class="reference internal" href="api_reference.html#performance-tips">Performance Tips</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="api_reference.html#type-annotations">Type Annotations</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="color_management.html">Color Management &amp; Tonemap Pipeline</a><ul>
<li class="toctree-l2"><a class="reference internal" href="color_management.html#overview">Overview</a></li>
<li class="toctree-l2"><a class="reference internal" href="color_management.html#pipeline-details">Pipeline Details</a><ul>
<li class="toctree-l3"><a class="reference internal" href="color_management.html#linear-scene-lighting">1. Linear Scene Lighting</a></li>
<li class="toctree-l3"><a class="reference internal" href="color_management.html#tone-mapping-reinhard">2. Tone Mapping (Reinhard)</a></li>
<li class="toctree-l3"><a class="reference internal" href="color_management.html#gamma-correction">3. Gamma Correction</a></li>
<li class="toctree-l3"><a class="reference internal" href="color_management.html#output-format">4. Output Format</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="color_management.html#format-choices-rationale">Format Choices &amp; Rationale</a><ul>
<li class="toctree-l3"><a class="reference internal" href="color_management.html#why-rgba8unormsrgb">Why Rgba8UnormSrgb?</a></li>
<li class="toctree-l3"><a class="reference internal" href="color_management.html#when-to-use-linear-vs-srgb-targets">When to Use Linear vs sRGB Targets</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="color_management.html#implementation-notes">Implementation Notes</a><ul>
<li class="toctree-l3"><a class="reference internal" href="color_management.html#shader-integration">Shader Integration</a></li>
<li class="toctree-l3"><a class="reference internal" href="color_management.html#cpu-reference-implementation">CPU Reference Implementation</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="color_management.html#best-practices">Best Practices</a></li>
<li class="toctree-l2"><a class="reference internal" href="color_management.html#future-extensions">Future Extensions</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="interop_zero_copy.html">Zero-Copy NumPy Interoperability</a><ul>
<li class="toctree-l2"><a class="reference internal" href="interop_zero_copy.html#overview">Overview</a></li>
<li class="toctree-l2"><a class="reference internal" href="interop_zero_copy.html#guaranteed-zero-copy-pathways">Guaranteed Zero-Copy Pathways</a><ul>
<li class="toctree-l3"><a class="reference internal" href="interop_zero_copy.html#rgba-output">RGBA Output</a></li>
<li class="toctree-l3"><a class="reference internal" href="interop_zero_copy.html#height-input">Height Input</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="interop_zero_copy.html#data-type-and-layout-requirements">Data Type and Layout Requirements</a><ul>
<li class="toctree-l3"><a class="reference internal" href="interop_zero_copy.html#supported-input-types">Supported Input Types</a></li>
<li class="toctree-l3"><a class="reference internal" href="interop_zero_copy.html#output-guarantees">Output Guarantees</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="interop_zero_copy.html#validation-and-debugging">Validation and Debugging</a><ul>
<li class="toctree-l3"><a class="reference internal" href="interop_zero_copy.html#using-validation-helpers">Using Validation Helpers</a></li>
<li class="toctree-l3"><a class="reference internal" href="interop_zero_copy.html#pointer-validation">Pointer Validation</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="interop_zero_copy.html#performance-profiling">Performance Profiling</a></li>
<li class="toctree-l2"><a class="reference internal" href="interop_zero_copy.html#common-pitfalls-and-solutions">Common Pitfalls and Solutions</a><ul>
<li class="toctree-l3"><a class="reference internal" href="interop_zero_copy.html#non-contiguous-arrays">Non-Contiguous Arrays</a></li>
<li class="toctree-l3"><a class="reference internal" href="interop_zero_copy.html#wrong-data-types">Wrong Data Types</a></li>
<li class="toctree-l3"><a class="reference internal" href="interop_zero_copy.html#memory-layout-assumptions">Memory Layout Assumptions</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="interop_zero_copy.html#testing-zero-copy-behavior">Testing Zero-Copy Behavior</a><ul>
<li class="toctree-l3"><a class="reference internal" href="interop_zero_copy.html#writing-zero-copy-tests">Writing Zero-Copy Tests</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="interop_zero_copy.html#implementation-notes">Implementation Notes</a><ul>
<li class="toctree-l3"><a class="reference internal" href="interop_zero_copy.html#buffer-reuse">Buffer Reuse</a></li>
<li class="toctree-l3"><a class="reference internal" href="interop_zero_copy.html#memory-alignment">Memory Alignment</a></li>
<li class="toctree-l3"><a class="reference internal" href="interop_zero_copy.html#cross-platform-consistency">Cross-Platform Consistency</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="interop_zero_copy.html#error-handling">Error Handling</a><ul>
<li class="toctree-l3"><a class="reference internal" href="interop_zero_copy.html#common-error-messages">Common Error Messages</a></li>
<li class="toctree-l3"><a class="reference internal" href="interop_zero_copy.html#debugging-tips">Debugging Tips</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="interop_zero_copy.html#best-practices">Best Practices</a><ul>
<li class="toctree-l3"><a class="reference internal" href="interop_zero_copy.html#for-application-developers">For Application Developers</a></li>
<li class="toctree-l3"><a class="reference internal" href="interop_zero_copy.html#for-library-integration">For Library Integration</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="memory_budget.html">Memory Budget Management</a><ul>
<li class="toctree-l2"><a class="reference internal" href="memory_budget.html#overview">Overview</a></li>
<li class="toctree-l2"><a class="reference internal" href="memory_budget.html#budget-limits">Budget Limits</a><ul>
<li class="toctree-l3"><a class="reference internal" href="memory_budget.html#default-budget-512-mib">Default Budget: 512 MiB</a></li>
<li class="toctree-l3"><a class="reference internal" href="memory_budget.html#what-counts-towards-the-budget">What Counts Towards the Budget</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="memory_budget.html#memory-metrics-api">Memory Metrics API</a><ul>
<li class="toctree-l3"><a class="reference internal" href="memory_budget.html#getting-memory-metrics">Getting Memory Metrics</a></li>
<li class="toctree-l3"><a class="reference internal" href="memory_budget.html#metrics-dictionary-structure">Metrics Dictionary Structure</a></li>
<li class="toctree-l3"><a class="reference internal" href="memory_budget.html#example-metrics-output">Example Metrics Output</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="memory_budget.html#budget-enforcement">Budget Enforcement</a><ul>
<li class="toctree-l3"><a class="reference internal" href="memory_budget.html#automatic-checking">Automatic Checking</a></li>
<li class="toctree-l3"><a class="reference internal" href="memory_budget.html#error-messages">Error Messages</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="memory_budget.html#monitoring-memory-usage">Monitoring Memory Usage</a><ul>
<li class="toctree-l3"><a class="reference internal" href="memory_budget.html#real-time-monitoring">Real-Time Monitoring</a></li>
<li class="toctree-l3"><a class="reference internal" href="memory_budget.html#performance-impact-monitoring">Performance Impact Monitoring</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="memory_budget.html#memory-budget-scenarios">Memory Budget Scenarios</a><ul>
<li class="toctree-l3"><a class="reference internal" href="memory_budget.html#normal-usage-patterns">Normal Usage Patterns</a></li>
<li class="toctree-l3"><a class="reference internal" href="memory_budget.html#high-memory-scenarios">High Memory Scenarios</a></li>
<li class="toctree-l3"><a class="reference internal" href="memory_budget.html#budget-friendly-practices">Budget-Friendly Practices</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="memory_budget.html#debugging-memory-issues">Debugging Memory Issues</a><ul>
<li class="toctree-l3"><a class="reference internal" href="memory_budget.html#investigating-budget-violations">Investigating Budget Violations</a></li>
<li class="toctree-l3"><a class="reference internal" href="memory_budget.html#common-memory-issues">Common Memory Issues</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="memory_budget.html#implementation-details">Implementation Details</a><ul>
<li class="toctree-l3"><a class="reference internal" href="memory_budget.html#thread-safety">Thread Safety</a></li>
<li class="toctree-l3"><a class="reference internal" href="memory_budget.html#global-vs-per-renderer-tracking">Global vs. Per-Renderer Tracking</a></li>
<li class="toctree-l3"><a class="reference internal" href="memory_budget.html#memory-alignment">Memory Alignment</a></li>
<li class="toctree-l3"><a class="reference internal" href="memory_budget.html#performance-impact">Performance Impact</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="memory/index.html">Memory Management</a><ul>
<li class="toctree-l2"><a class="reference internal" href="memory/staging_rings.html">O1: Staging Buffer Rings</a><ul>
<li class="toctree-l3"><a class="reference internal" href="memory/staging_rings.html#overview">Overview</a></li>
<li class="toctree-l3"><a class="reference internal" href="memory/staging_rings.html#architecture">Architecture</a><ul>
<li class="toctree-l4"><a class="reference internal" href="memory/staging_rings.html#core-components">Core Components</a></li>
<li class="toctree-l4"><a class="reference internal" href="memory/staging_rings.html#buffer-states">Buffer States</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="memory/staging_rings.html#api-reference">API Reference</a><ul>
<li class="toctree-l4"><a class="reference internal" href="memory/staging_rings.html#rust-api">Rust API</a></li>
<li class="toctree-l4"><a class="reference internal" href="memory/staging_rings.html#python-api">Python API</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="memory/staging_rings.html#performance-characteristics">Performance Characteristics</a><ul>
<li class="toctree-l4"><a class="reference internal" href="memory/staging_rings.html#benchmarks">Benchmarks</a></li>
<li class="toctree-l4"><a class="reference internal" href="memory/staging_rings.html#typical-performance">Typical Performance</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="memory/staging_rings.html#configuration">Configuration</a><ul>
<li class="toctree-l4"><a class="reference internal" href="memory/staging_rings.html#ring-count">Ring Count</a></li>
<li class="toctree-l4"><a class="reference internal" href="memory/staging_rings.html#buffer-size">Buffer Size</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="memory/staging_rings.html#memory-budget">Memory Budget</a></li>
<li class="toctree-l3"><a class="reference internal" href="memory/staging_rings.html#error-handling">Error Handling</a><ul>
<li class="toctree-l4"><a class="reference internal" href="memory/staging_rings.html#common-issues">Common Issues</a></li>
<li class="toctree-l4"><a class="reference internal" href="memory/staging_rings.html#debug-information">Debug Information</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="memory/staging_rings.html#integration">Integration</a><ul>
<li class="toctree-l4"><a class="reference internal" href="memory/staging_rings.html#with-memory-pools-o2">With Memory Pools (O2)</a></li>
<li class="toctree-l4"><a class="reference internal" href="memory/staging_rings.html#with-texture-compression-o3">With Texture Compression (O3)</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="memory/staging_rings.html#testing">Testing</a><ul>
<li class="toctree-l4"><a class="reference internal" href="memory/staging_rings.html#unit-tests">Unit Tests</a></li>
<li class="toctree-l4"><a class="reference internal" href="memory/staging_rings.html#performance-tests">Performance Tests</a></li>
<li class="toctree-l4"><a class="reference internal" href="memory/staging_rings.html#example-usage">Example Usage</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="memory/staging_rings.html#troubleshooting">Troubleshooting</a><ul>
<li class="toctree-l4"><a class="reference internal" href="memory/staging_rings.html#high-buffer-stalls">High Buffer Stalls</a></li>
<li class="toctree-l4"><a class="reference internal" href="memory/staging_rings.html#memory-usage-issues">Memory Usage Issues</a></li>
<li class="toctree-l4"><a class="reference internal" href="memory/staging_rings.html#platform-differences">Platform Differences</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="memory/memory_pools.html">O2: GPU Memory Pools</a><ul>
<li class="toctree-l3"><a class="reference internal" href="memory/memory_pools.html#overview">Overview</a></li>
<li class="toctree-l3"><a class="reference internal" href="memory/memory_pools.html#architecture">Architecture</a><ul>
<li class="toctree-l4"><a class="reference internal" href="memory/memory_pools.html#core-components">Core Components</a></li>
<li class="toctree-l4"><a class="reference internal" href="memory/memory_pools.html#size-buckets">Size Buckets</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="memory/memory_pools.html#api-reference">API Reference</a><ul>
<li class="toctree-l4"><a class="reference internal" href="memory/memory_pools.html#rust-api">Rust API</a></li>
<li class="toctree-l4"><a class="reference internal" href="memory/memory_pools.html#python-api">Python API</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="memory/memory_pools.html#performance-characteristics">Performance Characteristics</a><ul>
<li class="toctree-l4"><a class="reference internal" href="memory/memory_pools.html#benchmarks">Benchmarks</a></li>
<li class="toctree-l4"><a class="reference internal" href="memory/memory_pools.html#allocation-performance">Allocation Performance</a></li>
<li class="toctree-l4"><a class="reference internal" href="memory/memory_pools.html#fragmentation-mitigation">Fragmentation Mitigation</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="memory/memory_pools.html#configuration">Configuration</a><ul>
<li class="toctree-l4"><a class="reference internal" href="memory/memory_pools.html#size-bucket-tuning">Size Bucket Tuning</a></li>
<li class="toctree-l4"><a class="reference internal" href="memory/memory_pools.html#pool-sizing">Pool Sizing</a></li>
<li class="toctree-l4"><a class="reference internal" href="memory/memory_pools.html#memory-budget">Memory Budget</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="memory/memory_pools.html#reference-counting">Reference Counting</a><ul>
<li class="toctree-l4"><a class="reference internal" href="memory/memory_pools.html#lifecycle-management">Lifecycle Management</a></li>
<li class="toctree-l4"><a class="reference internal" href="memory/memory_pools.html#thread-safety">Thread Safety</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="memory/memory_pools.html#defragmentation">Defragmentation</a><ul>
<li class="toctree-l4"><a class="reference internal" href="memory/memory_pools.html#automatic-defragmentation">Automatic Defragmentation</a></li>
<li class="toctree-l4"><a class="reference internal" href="memory/memory_pools.html#defragmentation-strategy">Defragmentation Strategy</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="memory/memory_pools.html#error-handling">Error Handling</a><ul>
<li class="toctree-l4"><a class="reference internal" href="memory/memory_pools.html#common-issues">Common Issues</a></li>
<li class="toctree-l4"><a class="reference internal" href="memory/memory_pools.html#debug-information">Debug Information</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="memory/memory_pools.html#integration">Integration</a><ul>
<li class="toctree-l4"><a class="reference internal" href="memory/memory_pools.html#with-staging-rings-o1">With Staging Rings (O1)</a></li>
<li class="toctree-l4"><a class="reference internal" href="memory/memory_pools.html#with-big-buffers">With Big Buffers</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="memory/memory_pools.html#testing">Testing</a><ul>
<li class="toctree-l4"><a class="reference internal" href="memory/memory_pools.html#unit-tests">Unit Tests</a></li>
<li class="toctree-l4"><a class="reference internal" href="memory/memory_pools.html#performance-tests">Performance Tests</a></li>
<li class="toctree-l4"><a class="reference internal" href="memory/memory_pools.html#example-usage">Example Usage</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="memory/memory_pools.html#troubleshooting">Troubleshooting</a><ul>
<li class="toctree-l4"><a class="reference internal" href="memory/memory_pools.html#high-fragmentation">High Fragmentation</a></li>
<li class="toctree-l4"><a class="reference internal" href="memory/memory_pools.html#memory-leaks">Memory Leaks</a></li>
<li class="toctree-l4"><a class="reference internal" href="memory/memory_pools.html#performance-issues">Performance Issues</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="memory/memory_pools.html#platform-differences">Platform Differences</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="memory/compressed_textures.html">O3: Compressed Texture Pipeline</a><ul>
<li class="toctree-l3"><a class="reference internal" href="memory/compressed_textures.html#overview">Overview</a></li>
<li class="toctree-l3"><a class="reference internal" href="memory/compressed_textures.html#architecture">Architecture</a><ul>
<li class="toctree-l4"><a class="reference internal" href="memory/compressed_textures.html#core-components">Core Components</a></li>
<li class="toctree-l4"><a class="reference internal" href="memory/compressed_textures.html#supported-formats">Supported Formats</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="memory/compressed_textures.html#api-reference">API Reference</a><ul>
<li class="toctree-l4"><a class="reference internal" href="memory/compressed_textures.html#rust-api">Rust API</a></li>
<li class="toctree-l4"><a class="reference internal" href="memory/compressed_textures.html#python-api">Python API</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="memory/compressed_textures.html#performance-characteristics">Performance Characteristics</a><ul>
<li class="toctree-l4"><a class="reference internal" href="memory/compressed_textures.html#benchmarks">Benchmarks</a></li>
<li class="toctree-l4"><a class="reference internal" href="memory/compressed_textures.html#compression-performance">Compression Performance</a></li>
<li class="toctree-l4"><a class="reference internal" href="memory/compressed_textures.html#memory-usage">Memory Usage</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="memory/compressed_textures.html#configuration">Configuration</a><ul>
<li class="toctree-l4"><a class="reference internal" href="memory/compressed_textures.html#compression-quality-levels">Compression Quality Levels</a></li>
<li class="toctree-l4"><a class="reference internal" href="memory/compressed_textures.html#use-case-optimization">Use Case Optimization</a></li>
<li class="toctree-l4"><a class="reference internal" href="memory/compressed_textures.html#format-selection-algorithm">Format Selection Algorithm</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="memory/compressed_textures.html#memory-budget-compliance">Memory Budget Compliance</a></li>
<li class="toctree-l3"><a class="reference internal" href="memory/compressed_textures.html#ktx2-container-support">KTX2 Container Support</a><ul>
<li class="toctree-l4"><a class="reference internal" href="memory/compressed_textures.html#supported-features">Supported Features</a></li>
<li class="toctree-l4"><a class="reference internal" href="memory/compressed_textures.html#transcoding-pipeline">Transcoding Pipeline</a></li>
<li class="toctree-l4"><a class="reference internal" href="memory/compressed_textures.html#current-limitations">Current Limitations</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="memory/compressed_textures.html#error-handling">Error Handling</a><ul>
<li class="toctree-l4"><a class="reference internal" href="memory/compressed_textures.html#common-issues">Common Issues</a></li>
<li class="toctree-l4"><a class="reference internal" href="memory/compressed_textures.html#debug-information">Debug Information</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="memory/compressed_textures.html#integration">Integration</a><ul>
<li class="toctree-l4"><a class="reference internal" href="memory/compressed_textures.html#with-memory-pools-o2">With Memory Pools (O2)</a></li>
<li class="toctree-l4"><a class="reference internal" href="memory/compressed_textures.html#with-virtual-texturing-o4">With Virtual Texturing (O4)</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="memory/compressed_textures.html#testing">Testing</a><ul>
<li class="toctree-l4"><a class="reference internal" href="memory/compressed_textures.html#unit-tests">Unit Tests</a></li>
<li class="toctree-l4"><a class="reference internal" href="memory/compressed_textures.html#quality-tests">Quality Tests</a></li>
<li class="toctree-l4"><a class="reference internal" href="memory/compressed_textures.html#example-usage">Example Usage</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="memory/compressed_textures.html#troubleshooting">Troubleshooting</a><ul>
<li class="toctree-l4"><a class="reference internal" href="memory/compressed_textures.html#poor-compression-quality">Poor Compression Quality</a></li>
<li class="toctree-l4"><a class="reference internal" href="memory/compressed_textures.html#high-memory-usage">High Memory Usage</a></li>
<li class="toctree-l4"><a class="reference internal" href="memory/compressed_textures.html#loading-failures">Loading Failures</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="memory/compressed_textures.html#platform-differences">Platform Differences</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="memory/virtual_texturing.html">Virtual Texture Streaming</a><ul>
<li class="toctree-l3"><a class="reference internal" href="memory/virtual_texturing.html#overview">Overview</a></li>
<li class="toctree-l3"><a class="reference internal" href="memory/virtual_texturing.html#key-components">Key Components</a><ul>
<li class="toctree-l4"><a class="reference internal" href="memory/virtual_texturing.html#virtualtexturesystem">VirtualTextureSystem</a></li>
<li class="toctree-l4"><a class="reference internal" href="memory/virtual_texturing.html#tile-management">Tile Management</a></li>
<li class="toctree-l4"><a class="reference internal" href="memory/virtual_texturing.html#camera-based-streaming">Camera-Based Streaming</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="memory/virtual_texturing.html#configuration">Configuration</a><ul>
<li class="toctree-l4"><a class="reference internal" href="memory/virtual_texturing.html#memory-budget">Memory Budget</a></li>
<li class="toctree-l4"><a class="reference internal" href="memory/virtual_texturing.html#tile-size">Tile Size</a></li>
<li class="toctree-l4"><a class="reference internal" href="memory/virtual_texturing.html#quality-settings">Quality Settings</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="memory/virtual_texturing.html#usage-patterns">Usage Patterns</a><ul>
<li class="toctree-l4"><a class="reference internal" href="memory/virtual_texturing.html#basic-streaming-setup">Basic Streaming Setup</a></li>
<li class="toctree-l4"><a class="reference internal" href="memory/virtual_texturing.html#prefetching">Prefetching</a></li>
<li class="toctree-l4"><a class="reference internal" href="memory/virtual_texturing.html#multiple-textures">Multiple Textures</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="memory/virtual_texturing.html#performance-monitoring">Performance Monitoring</a><ul>
<li class="toctree-l4"><a class="reference internal" href="memory/virtual_texturing.html#statistics-tracking">Statistics Tracking</a></li>
<li class="toctree-l4"><a class="reference internal" href="memory/virtual_texturing.html#memory-analysis">Memory Analysis</a></li>
<li class="toctree-l4"><a class="reference internal" href="memory/virtual_texturing.html#performance-estimation">Performance Estimation</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="memory/virtual_texturing.html#integration-with-other-systems">Integration with Other Systems</a><ul>
<li class="toctree-l4"><a class="reference internal" href="memory/virtual_texturing.html#staging-rings-integration">Staging Rings Integration</a></li>
<li class="toctree-l4"><a class="reference internal" href="memory/virtual_texturing.html#compressed-texture-support">Compressed Texture Support</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="memory/virtual_texturing.html#shader-integration">Shader Integration</a><ul>
<li class="toctree-l4"><a class="reference internal" href="memory/virtual_texturing.html#wgsl-shader-code">WGSL Shader Code</a></li>
<li class="toctree-l4"><a class="reference internal" href="memory/virtual_texturing.html#c-integration">C++ Integration</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="memory/virtual_texturing.html#best-practices">Best Practices</a><ul>
<li class="toctree-l4"><a class="reference internal" href="memory/virtual_texturing.html#memory-budget-guidelines">Memory Budget Guidelines</a></li>
<li class="toctree-l4"><a class="reference internal" href="memory/virtual_texturing.html#tile-size-selection">Tile Size Selection</a></li>
<li class="toctree-l4"><a class="reference internal" href="memory/virtual_texturing.html#streaming-strategy">Streaming Strategy</a></li>
<li class="toctree-l4"><a class="reference internal" href="memory/virtual_texturing.html#performance-optimization">Performance Optimization</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="memory/virtual_texturing.html#troubleshooting">Troubleshooting</a><ul>
<li class="toctree-l4"><a class="reference internal" href="memory/virtual_texturing.html#common-issues">Common Issues</a></li>
<li class="toctree-l4"><a class="reference internal" href="memory/virtual_texturing.html#debug-information">Debug Information</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="memory/virtual_texturing.html#api-reference">API Reference</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="memory/index.html#overview">Overview</a></li>
<li class="toctree-l2"><a class="reference internal" href="memory/index.html#quick-start">Quick Start</a></li>
<li class="toctree-l2"><a class="reference internal" href="memory/index.html#memory-monitoring">Memory Monitoring</a></li>
<li class="toctree-l2"><a class="reference internal" href="memory/index.html#advanced-features">Advanced Features</a></li>
<li class="toctree-l2"><a class="reference internal" href="memory/index.html#best-practices">Best Practices</a></li>
<li class="toctree-l2"><a class="reference internal" href="memory/index.html#integration-examples">Integration Examples</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="api/path_tracing.html">A1: GPU Path Tracer (MVP)</a><ul>
<li class="toctree-l2"><a class="reference internal" href="api/path_tracing.html#gpu-usage">GPU Usage</a></li>
<li class="toctree-l2"><a class="reference internal" href="api/path_tracing.html#cpu-reference">CPU Reference</a></li>
<li class="toctree-l2"><a class="reference internal" href="api/path_tracing.html#progressive-tiling-a15">Progressive Tiling (A15)</a></li>
<li class="toctree-l2"><a class="reference internal" href="api/path_tracing.html#limitations">Limitations</a></li>
</ul>
</li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Advanced Features:</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="postfx/index.html">Post-Processing Effect Chain</a><ul>
<li class="toctree-l2"><a class="reference internal" href="postfx/index.html#features">Features</a></li>
<li class="toctree-l2"><a class="reference internal" href="postfx/index.html#python-api">Python API</a></li>
<li class="toctree-l2"><a class="reference internal" href="postfx/index.html#notes">Notes</a></li>
<li class="toctree-l2"><a class="reference internal" href="postfx/index.html#demo">Demo</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="pbr_materials.html">PBR Materials</a><ul>
<li class="toctree-l2"><a class="reference internal" href="pbr_materials.html#quick-start">Quick Start</a></li>
<li class="toctree-l2"><a class="reference internal" href="pbr_materials.html#api-reference">API Reference</a></li>
<li class="toctree-l2"><a class="reference internal" href="pbr_materials.html#texture-support">Texture Support</a></li>
<li class="toctree-l2"><a class="reference internal" href="pbr_materials.html#brdf-evaluation">BRDF Evaluation</a></li>
<li class="toctree-l2"><a class="reference internal" href="pbr_materials.html#predefined-materials">Predefined Materials</a></li>
<li class="toctree-l2"><a class="reference internal" href="pbr_materials.html#material-validation">Material Validation</a></li>
<li class="toctree-l2"><a class="reference internal" href="pbr_materials.html#gpu-integration">GPU Integration</a></li>
<li class="toctree-l2"><a class="reference internal" href="pbr_materials.html#lighting-configuration">Lighting Configuration</a></li>
<li class="toctree-l2"><a class="reference internal" href="pbr_materials.html#feature-detection">Feature Detection</a></li>
<li class="toctree-l2"><a class="reference internal" href="pbr_materials.html#best-practices">Best Practices</a></li>
<li class="toctree-l2"><a class="reference internal" href="pbr_materials.html#legacy-compatibility">Legacy Compatibility</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="shadow_mapping.html">Shadow Mapping</a><ul>
<li class="toctree-l2"><a class="reference internal" href="shadow_mapping.html#quick-start">Quick Start</a></li>
<li class="toctree-l2"><a class="reference internal" href="shadow_mapping.html#memory-management">Memory Management</a></li>
<li class="toctree-l2"><a class="reference internal" href="shadow_mapping.html#shadow-configuration">Shadow Configuration</a></li>
<li class="toctree-l2"><a class="reference internal" href="shadow_mapping.html#directional-lighting">Directional Lighting</a></li>
<li class="toctree-l2"><a class="reference internal" href="shadow_mapping.html#shadow-rendering">Shadow Rendering</a></li>
<li class="toctree-l2"><a class="reference internal" href="shadow_mapping.html#quality-vs-performance">Quality vs Performance</a></li>
<li class="toctree-l2"><a class="reference internal" href="shadow_mapping.html#pcf-filtering">PCF Filtering</a></li>
<li class="toctree-l2"><a class="reference internal" href="shadow_mapping.html#advanced-features">Advanced Features</a></li>
<li class="toctree-l2"><a class="reference internal" href="shadow_mapping.html#integration-examples">Integration Examples</a></li>
<li class="toctree-l2"><a class="reference internal" href="shadow_mapping.html#performance-monitoring">Performance Monitoring</a></li>
<li class="toctree-l2"><a class="reference internal" href="shadow_mapping.html#troubleshooting">Troubleshooting</a></li>
<li class="toctree-l2"><a class="reference internal" href="shadow_mapping.html#legacy-support">Legacy Support</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="user/path_tracing.html">Path Tracing (Workstream A)</a><ul>
<li class="toctree-l2"><a class="reference internal" href="user/path_tracing.html#overview">Overview</a></li>
<li class="toctree-l2"><a class="reference internal" href="user/path_tracing.html#api">API</a></li>
<li class="toctree-l2"><a class="reference internal" href="user/path_tracing.html#roadmap">Roadmap</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="vector_graphics.html">Vector Graphics</a><ul>
<li class="toctree-l2"><a class="reference internal" href="vector_graphics.html#quick-start">Quick Start</a></li>
<li class="toctree-l2"><a class="reference internal" href="vector_graphics.html#vector-types">Vector Types</a></li>
<li class="toctree-l2"><a class="reference internal" href="vector_graphics.html#advanced-features">Advanced Features</a></li>
<li class="toctree-l2"><a class="reference internal" href="vector_graphics.html#data-format-requirements">Data Format Requirements</a></li>
<li class="toctree-l2"><a class="reference internal" href="vector_graphics.html#performance-considerations">Performance Considerations</a></li>
<li class="toctree-l2"><a class="reference internal" href="vector_graphics.html#integration-with-3d-rendering">Integration with 3D Rendering</a></li>
<li class="toctree-l2"><a class="reference internal" href="vector_graphics.html#use-cases">Use Cases</a></li>
<li class="toctree-l2"><a class="reference internal" href="vector_graphics.html#troubleshooting">Troubleshooting</a></li>
<li class="toctree-l2"><a class="reference internal" href="vector_graphics.html#advanced-examples">Advanced Examples</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="terrain_rendering.html">Terrain Rendering</a><ul>
<li class="toctree-l2"><a class="reference internal" href="terrain_rendering.html#quick-start">Quick Start</a></li>
<li class="toctree-l2"><a class="reference internal" href="terrain_rendering.html#height-data-processing">Height Data Processing</a></li>
<li class="toctree-l2"><a class="reference internal" href="terrain_rendering.html#scene-configuration">Scene Configuration</a></li>
<li class="toctree-l2"><a class="reference internal" href="terrain_rendering.html#colormap-system">Colormap System</a></li>
<li class="toctree-l2"><a class="reference internal" href="terrain_rendering.html#level-of-detail-lod">Level of Detail (LOD)</a></li>
<li class="toctree-l2"><a class="reference internal" href="terrain_rendering.html#terrain-analysis">Terrain Analysis</a></li>
<li class="toctree-l2"><a class="reference internal" href="terrain_rendering.html#advanced-features">Advanced Features</a></li>
<li class="toctree-l2"><a class="reference internal" href="terrain_rendering.html#integration-with-other-systems">Integration with Other Systems</a></li>
<li class="toctree-l2"><a class="reference internal" href="terrain_rendering.html#performance-optimization">Performance Optimization</a></li>
<li class="toctree-l2"><a class="reference internal" href="terrain_rendering.html#real-world-applications">Real-World Applications</a></li>
<li class="toctree-l2"><a class="reference internal" href="terrain_rendering.html#troubleshooting">Troubleshooting</a></li>
<li class="toctree-l2"><a class="reference internal" href="terrain_rendering.html#example-applications">Example Applications</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="async_operations.html">Async Operations</a><ul>
<li class="toctree-l2"><a class="reference internal" href="async_operations.html#async-readback-system">Async Readback System</a></li>
<li class="toctree-l2"><a class="reference internal" href="async_operations.html#multi-threaded-command-recording">Multi-threaded Command Recording</a></li>
<li class="toctree-l2"><a class="reference internal" href="async_operations.html#async-compute-operations">Async Compute Operations</a></li>
<li class="toctree-l2"><a class="reference internal" href="async_operations.html#non-blocking-gpu-operations">Non-blocking GPU Operations</a></li>
<li class="toctree-l2"><a class="reference internal" href="async_operations.html#performance-monitoring">Performance Monitoring</a></li>
<li class="toctree-l2"><a class="reference internal" href="async_operations.html#memory-management-for-async-operations">Memory Management for Async Operations</a></li>
<li class="toctree-l2"><a class="reference internal" href="async_operations.html#best-practices">Best Practices</a></li>
<li class="toctree-l2"><a class="reference internal" href="async_operations.html#example-applications">Example Applications</a></li>
<li class="toctree-l2"><a class="reference internal" href="async_operations.html#troubleshooting">Troubleshooting</a></li>
</ul>
</li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Basemaps &amp; Tiles:</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="tiles/xyz_wmts.html">docs/tiles/xyz_wmts.md</a></li>
<li class="toctree-l1"><a class="reference internal" href="tiles/xyz_wmts.html#basemap-tile-fetching-caching-and-composition-xyz-wmts-in-forge3d">Basemap tile fetching, caching, and composition (XYZ/WMTS) in forge3d.</a></li>
<li class="toctree-l1"><a class="reference internal" href="tiles/xyz_wmts.html#documents-the-python-tiles-api-cache-layout-and-attribution-requirements">Documents the Python tiles API, cache layout, and attribution requirements.</a></li>
<li class="toctree-l1"><a class="reference internal" href="tiles/xyz_wmts.html#relevant-files-python-forge3d-tiles-client-py-python-forge3d-tiles-overlay-py-examples-xyz-tile-compose-demo-py">RELEVANT FILES:python/forge3d/tiles/client.py,python/forge3d/tiles/overlay.py,examples/xyz_tile_compose_demo.py</a><ul>
<li class="toctree-l2"><a class="reference internal" href="tiles/xyz_wmts.html#overview">Overview</a></li>
<li class="toctree-l2"><a class="reference internal" href="tiles/xyz_wmts.html#installation">Installation</a></li>
<li class="toctree-l2"><a class="reference internal" href="tiles/xyz_wmts.html#api">API</a></li>
<li class="toctree-l2"><a class="reference internal" href="tiles/xyz_wmts.html#cache-layout">Cache layout</a></li>
<li class="toctree-l2"><a class="reference internal" href="tiles/xyz_wmts.html#attribution">Attribution</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="integration/cartopy.html">docs/integration/cartopy.md</a></li>
<li class="toctree-l1"><a class="reference internal" href="integration/cartopy.html#cartopy-integration-example-using-forge3d-tiles-as-a-background">Cartopy integration example using forge3d tiles as a background.</a></li>
<li class="toctree-l1"><a class="reference internal" href="integration/cartopy.html#shows-headless-agg-rendering-and-extent-alignment-with-geoaxes">Shows headless (Agg) rendering and extent alignment with GeoAxes.</a></li>
<li class="toctree-l1"><a class="reference internal" href="integration/cartopy.html#relevant-files-examples-cartopy-overlay-py-python-forge3d-tiles-client-py-python-forge3d-tiles-overlay-py">RELEVANT FILES:examples/cartopy_overlay.py,python/forge3d/tiles/client.py,python/forge3d/tiles/overlay.py</a><ul>
<li class="toctree-l2"><a class="reference internal" href="integration/cartopy.html#overview">Overview</a></li>
<li class="toctree-l2"><a class="reference internal" href="integration/cartopy.html#requirements">Requirements</a></li>
<li class="toctree-l2"><a class="reference internal" href="integration/cartopy.html#example">Example</a></li>
</ul>
</li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Library Integrations:</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="integration/matplotlib.html">Matplotlib Integration</a><ul>
<li class="toctree-l2"><a class="reference internal" href="integration/matplotlib.html#overview">Overview</a></li>
<li class="toctree-l2"><a class="reference internal" href="integration/matplotlib.html#installation">Installation</a></li>
<li class="toctree-l2"><a class="reference internal" href="integration/matplotlib.html#colormap-integration">Colormap Integration</a><ul>
<li class="toctree-l3"><a class="reference internal" href="integration/matplotlib.html#basic-usage">Basic Usage</a></li>
<li class="toctree-l3"><a class="reference internal" href="integration/matplotlib.html#supported-colormaps">Supported Colormaps</a></li>
<li class="toctree-l3"><a class="reference internal" href="integration/matplotlib.html#custom-colormap-objects">Custom Colormap Objects</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="integration/matplotlib.html#data-normalization">Data Normalization</a><ul>
<li class="toctree-l3"><a class="reference internal" href="integration/matplotlib.html#linear-normalization">Linear Normalization</a></li>
<li class="toctree-l3"><a class="reference internal" href="integration/matplotlib.html#logarithmic-normalization">Logarithmic Normalization</a></li>
<li class="toctree-l3"><a class="reference internal" href="integration/matplotlib.html#power-law-normalization">Power Law Normalization</a></li>
<li class="toctree-l3"><a class="reference internal" href="integration/matplotlib.html#boundary-normalization">Boundary Normalization</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="integration/matplotlib.html#display-helpers">Display Helpers</a><ul>
<li class="toctree-l3"><a class="reference internal" href="integration/matplotlib.html#basic-display">Basic Display</a></li>
<li class="toctree-l3"><a class="reference internal" href="integration/matplotlib.html#custom-extents-and-dpi">Custom Extents and DPI</a></li>
<li class="toctree-l3"><a class="reference internal" href="integration/matplotlib.html#subplot-comparisons">Subplot Comparisons</a></li>
<li class="toctree-l3"><a class="reference internal" href="integration/matplotlib.html#saving-comparisons">Saving Comparisons</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="integration/matplotlib.html#accuracy-and-performance">Accuracy and Performance</a><ul>
<li class="toctree-l3"><a class="reference internal" href="integration/matplotlib.html#colormap-accuracy">Colormap Accuracy</a></li>
<li class="toctree-l3"><a class="reference internal" href="integration/matplotlib.html#normalization-accuracy">Normalization Accuracy</a></li>
<li class="toctree-l3"><a class="reference internal" href="integration/matplotlib.html#zero-copy-display">Zero-Copy Display</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="integration/matplotlib.html#error-handling-and-validation">Error Handling and Validation</a><ul>
<li class="toctree-l3"><a class="reference internal" href="integration/matplotlib.html#optional-dependency-handling">Optional Dependency Handling</a></li>
<li class="toctree-l3"><a class="reference internal" href="integration/matplotlib.html#array-validation">Array Validation</a></li>
<li class="toctree-l3"><a class="reference internal" href="integration/matplotlib.html#supported-formats">Supported Formats</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="integration/matplotlib.html#examples">Examples</a><ul>
<li class="toctree-l3"><a class="reference internal" href="integration/matplotlib.html#complete-terrain-visualization">Complete Terrain Visualization</a></li>
<li class="toctree-l3"><a class="reference internal" href="integration/matplotlib.html#performance-comparison">Performance Comparison</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="integration/matplotlib.html#best-practices">Best Practices</a><ul>
<li class="toctree-l3"><a class="reference internal" href="integration/matplotlib.html#memory-efficiency">Memory Efficiency</a></li>
<li class="toctree-l3"><a class="reference internal" href="integration/matplotlib.html#colormap-selection">Colormap Selection</a></li>
<li class="toctree-l3"><a class="reference internal" href="integration/matplotlib.html#error-handling">Error Handling</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="integration/matplotlib.html#api-reference">API Reference</a><ul>
<li class="toctree-l3"><a class="reference internal" href="integration/matplotlib.html#forge3d-adapters-mpl-cmap">forge3d.adapters.mpl_cmap</a></li>
<li class="toctree-l3"><a class="reference internal" href="integration/matplotlib.html#forge3d-helpers-mpl-display">forge3d.helpers.mpl_display</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="integration/matplotlib.html#troubleshooting">Troubleshooting</a><ul>
<li class="toctree-l3"><a class="reference internal" href="integration/matplotlib.html#common-issues">Common Issues</a></li>
<li class="toctree-l3"><a class="reference internal" href="integration/matplotlib.html#performance-issues">Performance Issues</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="integration/external_images.html">External Image Import Integration</a><ul>
<li class="toctree-l2"><a class="reference internal" href="integration/external_images.html#overview">Overview</a></li>
<li class="toctree-l2"><a class="reference internal" href="integration/external_images.html#webgpu-parity">WebGPU Parity</a><ul>
<li class="toctree-l3"><a class="reference internal" href="integration/external_images.html#what-we-match">What We Match</a></li>
<li class="toctree-l3"><a class="reference internal" href="integration/external_images.html#key-similarities">Key Similarities</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="integration/external_images.html#native-vs-browser-differences">Native vs Browser Differences</a><ul>
<li class="toctree-l3"><a class="reference internal" href="integration/external_images.html#input-sources">Input Sources</a></li>
<li class="toctree-l3"><a class="reference internal" href="integration/external_images.html#operational-differences">Operational Differences</a></li>
<li class="toctree-l3"><a class="reference internal" href="integration/external_images.html#format-support">Format Support</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="integration/external_images.html#implementation-architecture">Implementation Architecture</a><ul>
<li class="toctree-l3"><a class="reference internal" href="integration/external_images.html#core-components">Core Components</a></li>
<li class="toctree-l3"><a class="reference internal" href="integration/external_images.html#processing-pipeline">Processing Pipeline</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="integration/external_images.html#usage-examples">Usage Examples</a><ul>
<li class="toctree-l3"><a class="reference internal" href="integration/external_images.html#basic-image-import">Basic Image Import</a></li>
<li class="toctree-l3"><a class="reference internal" href="integration/external_images.html#advanced-configuration">Advanced Configuration</a></li>
<li class="toctree-l3"><a class="reference internal" href="integration/external_images.html#error-handling">Error Handling</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="integration/external_images.html#constraints-and-limitations">Constraints and Limitations</a><ul>
<li class="toctree-l3"><a class="reference internal" href="integration/external_images.html#memory-budget">Memory Budget</a></li>
<li class="toctree-l3"><a class="reference internal" href="integration/external_images.html#texture-size-limits">Texture Size Limits</a></li>
<li class="toctree-l3"><a class="reference internal" href="integration/external_images.html#format-constraints">Format Constraints</a></li>
<li class="toctree-l3"><a class="reference internal" href="integration/external_images.html#threading-model">Threading Model</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="integration/external_images.html#performance-considerations">Performance Considerations</a><ul>
<li class="toctree-l3"><a class="reference internal" href="integration/external_images.html#decode-performance">Decode Performance</a></li>
<li class="toctree-l3"><a class="reference internal" href="integration/external_images.html#upload-performance">Upload Performance</a></li>
<li class="toctree-l3"><a class="reference internal" href="integration/external_images.html#memory-usage-patterns">Memory Usage Patterns</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="integration/external_images.html#common-pitfalls-and-solutions">Common Pitfalls and Solutions</a><ul>
<li class="toctree-l3"><a class="reference internal" href="integration/external_images.html#file-path-issues">1. File Path Issues</a></li>
<li class="toctree-l3"><a class="reference internal" href="integration/external_images.html#memory-budget-exceeded">2. Memory Budget Exceeded</a></li>
<li class="toctree-l3"><a class="reference internal" href="integration/external_images.html#format-assumptions">3. Format Assumptions</a></li>
<li class="toctree-l3"><a class="reference internal" href="integration/external_images.html#color-space-expectations">4. Color Space Expectations</a></li>
<li class="toctree-l3"><a class="reference internal" href="integration/external_images.html#synchronous-blocking">5. Synchronous Blocking</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="integration/external_images.html#migration-from-browser-code">Migration from Browser Code</a><ul>
<li class="toctree-l3"><a class="reference internal" href="integration/external_images.html#replace-dom-image-loading">1. Replace DOM Image Loading</a></li>
<li class="toctree-l3"><a class="reference internal" href="integration/external_images.html#handle-synchronous-model">2. Handle Synchronous Model</a></li>
<li class="toctree-l3"><a class="reference internal" href="integration/external_images.html#adapt-error-handling">3. Adapt Error Handling</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="integration/external_images.html#future-enhancements">Future Enhancements</a></li>
<li class="toctree-l2"><a class="reference internal" href="integration/external_images.html#testing">Testing</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="user/datashader_interop.html">Datashader Integration</a><ul>
<li class="toctree-l2"><a class="reference internal" href="user/datashader_interop.html#overview">Overview</a></li>
<li class="toctree-l2"><a class="reference internal" href="user/datashader_interop.html#quick-start">Quick Start</a></li>
<li class="toctree-l2"><a class="reference internal" href="user/datashader_interop.html#installation">Installation</a></li>
<li class="toctree-l2"><a class="reference internal" href="user/datashader_interop.html#api-reference">API Reference</a><ul>
<li class="toctree-l3"><a class="reference internal" href="user/datashader_interop.html#availability-check">Availability Check</a><ul>
<li class="toctree-l4"><a class="reference internal" href="user/datashader_interop.html#forge3d.adapters.is_datashader_available"><code class="docutils literal notranslate"><span class="pre">is_datashader_available()</span></code></a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="user/datashader_interop.html#core-functions">Core Functions</a><ul>
<li class="toctree-l4"><a class="reference internal" href="user/datashader_interop.html#forge3d.adapters.rgba_view_from_agg"><code class="docutils literal notranslate"><span class="pre">rgba_view_from_agg()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="user/datashader_interop.html#forge3d.adapters.validate_alignment"><code class="docutils literal notranslate"><span class="pre">validate_alignment()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="user/datashader_interop.html#forge3d.adapters.to_overlay_texture"><code class="docutils literal notranslate"><span class="pre">to_overlay_texture()</span></code></a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="user/datashader_interop.html#convenience-functions">Convenience Functions</a><ul>
<li class="toctree-l4"><a class="reference internal" href="user/datashader_interop.html#forge3d.adapters.shade_to_overlay"><code class="docutils literal notranslate"><span class="pre">shade_to_overlay()</span></code></a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="user/datashader_interop.html#adapter-class">Adapter Class</a><ul>
<li class="toctree-l4"><a class="reference internal" href="user/datashader_interop.html#forge3d.adapters.DatashaderAdapter"><code class="docutils literal notranslate"><span class="pre">DatashaderAdapter</span></code></a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="user/datashader_interop.html#information-functions">Information Functions</a><ul>
<li class="toctree-l4"><a class="reference internal" href="user/datashader_interop.html#forge3d.adapters.get_datashader_info"><code class="docutils literal notranslate"><span class="pre">get_datashader_info()</span></code></a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="user/datashader_interop.html#memory-management">Memory Management</a><ul>
<li class="toctree-l3"><a class="reference internal" href="user/datashader_interop.html#memory-optimization-strategies">Memory Optimization Strategies</a></li>
<li class="toctree-l3"><a class="reference internal" href="user/datashader_interop.html#memory-budget-guidelines">Memory Budget Guidelines</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="user/datashader_interop.html#performance-considerations">Performance Considerations</a><ul>
<li class="toctree-l3"><a class="reference internal" href="user/datashader_interop.html#zoom-level-performance">Zoom Level Performance</a></li>
<li class="toctree-l3"><a class="reference internal" href="user/datashader_interop.html#performance-monitoring">Performance Monitoring</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="user/datashader_interop.html#coordinate-systems">Coordinate Systems</a><ul>
<li class="toctree-l3"><a class="reference internal" href="user/datashader_interop.html#supported-coordinate-systems">Supported Coordinate Systems</a></li>
<li class="toctree-l3"><a class="reference internal" href="user/datashader_interop.html#alignment-validation">Alignment Validation</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="user/datashader_interop.html#best-practices">Best Practices</a><ul>
<li class="toctree-l3"><a class="reference internal" href="user/datashader_interop.html#data-preparation">Data Preparation</a></li>
<li class="toctree-l3"><a class="reference internal" href="user/datashader_interop.html#canvas-configuration">Canvas Configuration</a></li>
<li class="toctree-l3"><a class="reference internal" href="user/datashader_interop.html#error-handling">Error Handling</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="user/datashader_interop.html#troubleshooting">Troubleshooting</a><ul>
<li class="toctree-l3"><a class="reference internal" href="user/datashader_interop.html#common-issues-and-solutions">Common Issues and Solutions</a></li>
<li class="toctree-l3"><a class="reference internal" href="user/datashader_interop.html#debugging-tools">Debugging Tools</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="user/datashader_interop.html#examples">Examples</a></li>
<li class="toctree-l2"><a class="reference internal" href="user/datashader_interop.html#see-also">See Also</a></li>
</ul>
</li>
</ul>
<p class="caption" role="heading"><span class="caption-text">CI &amp; Testing:</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="ci/notebook_integration.html">Running Notebooks in CI</a><ul>
<li class="toctree-l2"><a class="reference internal" href="ci/notebook_integration.html#overview">Overview</a></li>
<li class="toctree-l2"><a class="reference internal" href="ci/notebook_integration.html#ci-integration-architecture">CI Integration Architecture</a><ul>
<li class="toctree-l3"><a class="reference internal" href="ci/notebook_integration.html#notebook-execution-workflow">Notebook Execution Workflow</a></li>
<li class="toctree-l3"><a class="reference internal" href="ci/notebook_integration.html#execution-pipeline">Execution Pipeline</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="ci/notebook_integration.html#configuration">Configuration</a><ul>
<li class="toctree-l3"><a class="reference internal" href="ci/notebook_integration.html#github-actions-workflow">GitHub Actions Workflow</a></li>
<li class="toctree-l3"><a class="reference internal" href="ci/notebook_integration.html#execution-requirements">Execution Requirements</a></li>
<li class="toctree-l3"><a class="reference internal" href="ci/notebook_integration.html#error-handling">Error Handling</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="ci/notebook_integration.html#notebook-structure">Notebook Structure</a><ul>
<li class="toctree-l3"><a class="reference internal" href="ci/notebook_integration.html#standard-cell-organization">Standard Cell Organization</a><ul>
<li class="toctree-l4"><a class="reference internal" href="ci/notebook_integration.html#introduction-setup">1. Introduction &amp; Setup</a></li>
<li class="toctree-l4"><a class="reference internal" href="ci/notebook_integration.html#device-information">2. Device Information</a></li>
<li class="toctree-l4"><a class="reference internal" href="ci/notebook_integration.html#data-generation-loading">3. Data Generation/Loading</a></li>
<li class="toctree-l4"><a class="reference internal" href="ci/notebook_integration.html#adapter-integration">4. Adapter Integration</a></li>
<li class="toctree-l4"><a class="reference internal" href="ci/notebook_integration.html#processing-rendering">5. Processing &amp; Rendering</a></li>
<li class="toctree-l4"><a class="reference internal" href="ci/notebook_integration.html#output-generation">6. Output Generation</a></li>
<li class="toctree-l4"><a class="reference internal" href="ci/notebook_integration.html#performance-metrics">7. Performance Metrics</a></li>
<li class="toctree-l4"><a class="reference internal" href="ci/notebook_integration.html#validation-cleanup">8. Validation &amp; Cleanup</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="ci/notebook_integration.html#dependency-management">Dependency Management</a><ul>
<li class="toctree-l3"><a class="reference internal" href="ci/notebook_integration.html#optional-dependencies">Optional Dependencies</a></li>
<li class="toctree-l3"><a class="reference internal" href="ci/notebook_integration.html#fallback-strategies">Fallback Strategies</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="ci/notebook_integration.html#ci-validation">CI Validation</a><ul>
<li class="toctree-l3"><a class="reference internal" href="ci/notebook_integration.html#success-criteria">Success Criteria</a></li>
<li class="toctree-l3"><a class="reference internal" href="ci/notebook_integration.html#failure-analysis">Failure Analysis</a><ul>
<li class="toctree-l4"><a class="reference internal" href="ci/notebook_integration.html#timeout-failures">Timeout Failures</a></li>
<li class="toctree-l4"><a class="reference internal" href="ci/notebook_integration.html#memory-failures">Memory Failures</a></li>
<li class="toctree-l4"><a class="reference internal" href="ci/notebook_integration.html#dependency-failures">Dependency Failures</a></li>
<li class="toctree-l4"><a class="reference internal" href="ci/notebook_integration.html#gpu-failures">GPU Failures</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="ci/notebook_integration.html#quality-metrics">Quality Metrics</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="ci/notebook_integration.html#performance-monitoring">Performance Monitoring</a><ul>
<li class="toctree-l3"><a class="reference internal" href="ci/notebook_integration.html#timing-benchmarks">Timing Benchmarks</a></li>
<li class="toctree-l3"><a class="reference internal" href="ci/notebook_integration.html#memory-tracking">Memory Tracking</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="ci/notebook_integration.html#best-practices">Best Practices</a><ul>
<li class="toctree-l3"><a class="reference internal" href="ci/notebook_integration.html#development-guidelines">Development Guidelines</a></li>
<li class="toctree-l3"><a class="reference internal" href="ci/notebook_integration.html#testing-locally">Testing Locally</a></li>
<li class="toctree-l3"><a class="reference internal" href="ci/notebook_integration.html#debugging-failed-runs">Debugging Failed Runs</a></li>
</ul>
</li>
</ul>
</li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu"  style="background: #2980B9" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="index.html">forge3d</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="index.html" class="icon icon-home" aria-label="Home"></a></li>
      <li class="breadcrumb-item active">SDF (Signed Distance Functions) Documentation</li>
      <li class="wy-breadcrumbs-aside">
              <a href="https://github.com/forge3d/forge3d/blob/main/docs/sdf.md" class="fa fa-github"> Edit on GitHub</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="sdf-signed-distance-functions-documentation">
<h1>SDF (Signed Distance Functions) Documentation<a class="headerlink" href="#sdf-signed-distance-functions-documentation" title="Link to this heading"></a></h1>
<section id="overview">
<h2>Overview<a class="headerlink" href="#overview" title="Link to this heading"></a></h2>
<p>The forge3d SDF module provides analytic signed distance function primitives and constructive solid geometry (CSG) operations for procedural geometry generation and rendering. This system combines traditional mesh rendering with SDF raymarching for hybrid geometry representation.</p>
</section>
<section id="features">
<h2>Features<a class="headerlink" href="#features" title="Link to this heading"></a></h2>
<ul class="simple">
<li><p><strong>Analytic SDF Primitives</strong>: Sphere, box, cylinder, plane, torus, capsule</p></li>
<li><p><strong>CSG Operations</strong>: Union, intersection, subtraction with smooth variants</p></li>
<li><p><strong>Hybrid Rendering</strong>: Combines SDF raymarching with BVH mesh traversal</p></li>
<li><p><strong>GPU Acceleration</strong>: WGSL compute shaders for high-performance rendering</p></li>
<li><p><strong>Python API</strong>: High-level Python interface for scene construction</p></li>
<li><p><strong>Performance Optimization</strong>: Early termination, bounds checking, soft shadows</p></li>
</ul>
</section>
<section id="core-concepts">
<h2>Core Concepts<a class="headerlink" href="#core-concepts" title="Link to this heading"></a></h2>
<section id="signed-distance-functions">
<h3>Signed Distance Functions<a class="headerlink" href="#signed-distance-functions" title="Link to this heading"></a></h3>
<p>A Signed Distance Function (SDF) returns the distance from any point in 3D space to the surface of an object. The sign indicates whether the point is inside (negative) or outside (positive) the object.</p>
<div class="highlight-rust notranslate"><div class="highlight"><pre><span></span><span class="c1">// Example: Sphere SDF</span>
<span class="k">fn</span><span class="w"> </span><span class="nf">sdf_sphere</span><span class="p">(</span><span class="n">point</span><span class="p">:</span><span class="w"> </span><span class="nc">Vec3</span><span class="p">,</span><span class="w"> </span><span class="n">center</span><span class="p">:</span><span class="w"> </span><span class="nc">Vec3</span><span class="p">,</span><span class="w"> </span><span class="n">radius</span><span class="p">:</span><span class="w"> </span><span class="kt">f32</span><span class="p">)</span><span class="w"> </span><span class="p">-&gt;</span><span class="w"> </span><span class="kt">f32</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="p">(</span><span class="n">point</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="n">center</span><span class="p">).</span><span class="n">length</span><span class="p">()</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="n">radius</span>
<span class="p">}</span>
</pre></div>
</div>
</section>
<section id="constructive-solid-geometry-csg">
<h3>Constructive Solid Geometry (CSG)<a class="headerlink" href="#constructive-solid-geometry-csg" title="Link to this heading"></a></h3>
<p>CSG operations combine multiple SDF primitives using boolean operations:</p>
<ul class="simple">
<li><p><strong>Union</strong>: Combines shapes (minimum distance)</p></li>
<li><p><strong>Intersection</strong>: Creates overlap region (maximum distance)</p></li>
<li><p><strong>Subtraction</strong>: Removes one shape from another</p></li>
<li><p><strong>Smooth variants</strong>: Create organic blending between shapes</p></li>
</ul>
</section>
<section id="hybrid-traversal">
<h3>Hybrid Traversal<a class="headerlink" href="#hybrid-traversal" title="Link to this heading"></a></h3>
<p>The hybrid system combines:</p>
<ul class="simple">
<li><p><strong>SDF Raymarching</strong>: Sphere tracing for analytic geometry</p></li>
<li><p><strong>BVH Traversal</strong>: Traditional ray-triangle intersection for meshes</p></li>
<li><p><strong>Unified Pipeline</strong>: Single rendering path for both geometry types</p></li>
</ul>
</section>
</section>
<section id="rust-api">
<h2>Rust API<a class="headerlink" href="#rust-api" title="Link to this heading"></a></h2>
<section id="basic-usage">
<h3>Basic Usage<a class="headerlink" href="#basic-usage" title="Link to this heading"></a></h3>
<div class="highlight-rust notranslate"><div class="highlight"><pre><span></span><span class="k">use</span><span class="w"> </span><span class="n">forge3d</span><span class="p">::</span><span class="n">sdf</span><span class="p">::</span><span class="o">*</span><span class="p">;</span>
<span class="k">use</span><span class="w"> </span><span class="n">glam</span><span class="p">::</span><span class="n">Vec3</span><span class="p">;</span>

<span class="c1">// Create SDF primitives</span>
<span class="kd">let</span><span class="w"> </span><span class="n">sphere</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">SdfPrimitive</span><span class="p">::</span><span class="n">sphere</span><span class="p">(</span><span class="n">Vec3</span><span class="p">::</span><span class="n">ZERO</span><span class="p">,</span><span class="w"> </span><span class="mf">1.0</span><span class="p">,</span><span class="w"> </span><span class="mi">1</span><span class="p">);</span>
<span class="kd">let</span><span class="w"> </span><span class="n">box_prim</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">SdfPrimitive</span><span class="p">::</span><span class="n">box_primitive</span><span class="p">(</span><span class="n">Vec3</span><span class="p">::</span><span class="n">new</span><span class="p">(</span><span class="mf">2.0</span><span class="p">,</span><span class="w"> </span><span class="mf">0.0</span><span class="p">,</span><span class="w"> </span><span class="mf">0.0</span><span class="p">),</span><span class="w"> </span><span class="n">Vec3</span><span class="p">::</span><span class="n">ONE</span><span class="p">,</span><span class="w"> </span><span class="mi">2</span><span class="p">);</span>

<span class="c1">// Build scene using builder pattern</span>
<span class="kd">let</span><span class="w"> </span><span class="p">(</span><span class="n">builder</span><span class="p">,</span><span class="w"> </span><span class="n">sphere_idx</span><span class="p">)</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">SdfSceneBuilder</span><span class="p">::</span><span class="n">new</span><span class="p">()</span>
<span class="w">    </span><span class="p">.</span><span class="n">add_sphere</span><span class="p">(</span><span class="n">Vec3</span><span class="p">::</span><span class="n">new</span><span class="p">(</span><span class="o">-</span><span class="mf">1.0</span><span class="p">,</span><span class="w"> </span><span class="mf">0.0</span><span class="p">,</span><span class="w"> </span><span class="mf">0.0</span><span class="p">),</span><span class="w"> </span><span class="mf">0.8</span><span class="p">,</span><span class="w"> </span><span class="mi">1</span><span class="p">);</span>

<span class="kd">let</span><span class="w"> </span><span class="p">(</span><span class="n">builder</span><span class="p">,</span><span class="w"> </span><span class="n">box_idx</span><span class="p">)</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">builder</span>
<span class="w">    </span><span class="p">.</span><span class="n">add_box</span><span class="p">(</span><span class="n">Vec3</span><span class="p">::</span><span class="n">new</span><span class="p">(</span><span class="mf">1.0</span><span class="p">,</span><span class="w"> </span><span class="mf">0.0</span><span class="p">,</span><span class="w"> </span><span class="mf">0.0</span><span class="p">),</span><span class="w"> </span><span class="n">Vec3</span><span class="p">::</span><span class="n">new</span><span class="p">(</span><span class="mf">0.7</span><span class="p">,</span><span class="w"> </span><span class="mf">0.7</span><span class="p">,</span><span class="w"> </span><span class="mf">0.7</span><span class="p">),</span><span class="w"> </span><span class="mi">2</span><span class="p">);</span>

<span class="kd">let</span><span class="w"> </span><span class="p">(</span><span class="n">builder</span><span class="p">,</span><span class="w"> </span><span class="n">union_idx</span><span class="p">)</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">builder</span>
<span class="w">    </span><span class="p">.</span><span class="k">union</span><span class="p">(</span><span class="n">sphere_idx</span><span class="p">,</span><span class="w"> </span><span class="n">box_idx</span><span class="p">,</span><span class="w"> </span><span class="mi">0</span><span class="p">);</span>

<span class="kd">let</span><span class="w"> </span><span class="n">scene</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">builder</span><span class="p">.</span><span class="n">build</span><span class="p">();</span>

<span class="c1">// Evaluate SDF at a point</span>
<span class="kd">let</span><span class="w"> </span><span class="n">result</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">scene</span><span class="p">.</span><span class="n">evaluate</span><span class="p">(</span><span class="n">Vec3</span><span class="p">::</span><span class="n">ZERO</span><span class="p">);</span>
<span class="fm">println!</span><span class="p">(</span><span class="s">&quot;Distance: {}, Material: {}&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">result</span><span class="p">.</span><span class="n">distance</span><span class="p">,</span><span class="w"> </span><span class="n">result</span><span class="p">.</span><span class="n">material_id</span><span class="p">);</span>
</pre></div>
</div>
</section>
<section id="hybrid-scene-construction">
<h3>Hybrid Scene Construction<a class="headerlink" href="#hybrid-scene-construction" title="Link to this heading"></a></h3>
<div class="highlight-rust notranslate"><div class="highlight"><pre><span></span><span class="c1">// Create hybrid scene combining SDF and mesh data</span>
<span class="kd">let</span><span class="w"> </span><span class="k">mut</span><span class="w"> </span><span class="n">hybrid_scene</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">HybridScene</span><span class="p">::</span><span class="n">new</span><span class="p">();</span>

<span class="c1">// Set SDF geometry</span>
<span class="n">hybrid_scene</span><span class="p">.</span><span class="n">set_sdf_scene</span><span class="p">(</span><span class="n">sdf_scene</span><span class="p">);</span>

<span class="c1">// Add mesh geometry (vertices, indices, BVH)</span>
<span class="n">hybrid_scene</span><span class="p">.</span><span class="n">add_mesh</span><span class="p">(</span><span class="n">vertices</span><span class="p">,</span><span class="w"> </span><span class="n">indices</span><span class="p">,</span><span class="w"> </span><span class="n">bvh</span><span class="p">)</span><span class="o">?</span><span class="p">;</span>

<span class="c1">// Prepare GPU resources</span>
<span class="n">hybrid_scene</span><span class="p">.</span><span class="n">prepare_gpu_resources</span><span class="p">()</span><span class="o">?</span><span class="p">;</span>

<span class="c1">// Ray intersection test</span>
<span class="kd">let</span><span class="w"> </span><span class="n">ray</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">HybridRay</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="n">origin</span><span class="p">:</span><span class="w"> </span><span class="nc">Vec3</span><span class="p">::</span><span class="n">ZERO</span><span class="p">,</span>
<span class="w">    </span><span class="n">direction</span><span class="p">:</span><span class="w"> </span><span class="nc">Vec3</span><span class="p">::</span><span class="n">new</span><span class="p">(</span><span class="mf">0.0</span><span class="p">,</span><span class="w"> </span><span class="mf">0.0</span><span class="p">,</span><span class="w"> </span><span class="o">-</span><span class="mf">1.0</span><span class="p">),</span>
<span class="w">    </span><span class="n">tmin</span><span class="p">:</span><span class="w"> </span><span class="mf">0.001</span><span class="p">,</span>
<span class="w">    </span><span class="n">tmax</span><span class="p">:</span><span class="w"> </span><span class="mf">100.0</span><span class="p">,</span>
<span class="p">};</span>

<span class="kd">let</span><span class="w"> </span><span class="n">hit_result</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">hybrid_scene</span><span class="p">.</span><span class="n">intersect</span><span class="p">(</span><span class="n">ray</span><span class="p">);</span>
<span class="k">if</span><span class="w"> </span><span class="n">hit_result</span><span class="p">.</span><span class="n">hit</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="fm">println!</span><span class="p">(</span><span class="s">&quot;Hit at distance: {}&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">hit_result</span><span class="p">.</span><span class="n">t</span><span class="p">);</span>
<span class="w">    </span><span class="fm">println!</span><span class="p">(</span><span class="s">&quot;Hit type: {}&quot;</span><span class="p">,</span><span class="w"> </span><span class="k">if</span><span class="w"> </span><span class="n">hit_result</span><span class="p">.</span><span class="n">hit_type</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="mi">1</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="s">&quot;SDF&quot;</span><span class="w"> </span><span class="p">}</span><span class="w"> </span><span class="k">else</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="s">&quot;Mesh&quot;</span><span class="w"> </span><span class="p">});</span>
<span class="p">}</span>
</pre></div>
</div>
</section>
<section id="sdf-primitives">
<h3>SDF Primitives<a class="headerlink" href="#sdf-primitives" title="Link to this heading"></a></h3>
<section id="sphere">
<h4>Sphere<a class="headerlink" href="#sphere" title="Link to this heading"></a></h4>
<div class="highlight-rust notranslate"><div class="highlight"><pre><span></span><span class="kd">let</span><span class="w"> </span><span class="n">sphere</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">SdfPrimitive</span><span class="p">::</span><span class="n">sphere</span><span class="p">(</span>
<span class="w">    </span><span class="n">Vec3</span><span class="p">::</span><span class="n">new</span><span class="p">(</span><span class="mf">0.0</span><span class="p">,</span><span class="w"> </span><span class="mf">0.0</span><span class="p">,</span><span class="w"> </span><span class="mf">0.0</span><span class="p">),</span><span class="w"> </span><span class="c1">// center</span>
<span class="w">    </span><span class="mf">1.0</span><span class="p">,</span><span class="w">                      </span><span class="c1">// radius</span>
<span class="w">    </span><span class="mi">1</span><span class="w">                         </span><span class="c1">// material_id</span>
<span class="p">);</span>
</pre></div>
</div>
</section>
<section id="box">
<h4>Box<a class="headerlink" href="#box" title="Link to this heading"></a></h4>
<div class="highlight-rust notranslate"><div class="highlight"><pre><span></span><span class="kd">let</span><span class="w"> </span><span class="n">box_prim</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">SdfPrimitive</span><span class="p">::</span><span class="n">box_primitive</span><span class="p">(</span>
<span class="w">    </span><span class="n">Vec3</span><span class="p">::</span><span class="n">new</span><span class="p">(</span><span class="mf">0.0</span><span class="p">,</span><span class="w"> </span><span class="mf">0.0</span><span class="p">,</span><span class="w"> </span><span class="mf">0.0</span><span class="p">),</span><span class="w">     </span><span class="c1">// center</span>
<span class="w">    </span><span class="n">Vec3</span><span class="p">::</span><span class="n">new</span><span class="p">(</span><span class="mf">1.0</span><span class="p">,</span><span class="w"> </span><span class="mf">1.0</span><span class="p">,</span><span class="w"> </span><span class="mf">1.0</span><span class="p">),</span><span class="w">     </span><span class="c1">// extents (half-size)</span>
<span class="w">    </span><span class="mi">2</span><span class="w">                             </span><span class="c1">// material_id</span>
<span class="p">);</span>
</pre></div>
</div>
</section>
<section id="cylinder">
<h4>Cylinder<a class="headerlink" href="#cylinder" title="Link to this heading"></a></h4>
<div class="highlight-rust notranslate"><div class="highlight"><pre><span></span><span class="kd">let</span><span class="w"> </span><span class="n">cylinder</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">SdfPrimitive</span><span class="p">::</span><span class="n">cylinder</span><span class="p">(</span>
<span class="w">    </span><span class="n">Vec3</span><span class="p">::</span><span class="n">new</span><span class="p">(</span><span class="mf">0.0</span><span class="p">,</span><span class="w"> </span><span class="mf">0.0</span><span class="p">,</span><span class="w"> </span><span class="mf">0.0</span><span class="p">),</span><span class="w"> </span><span class="c1">// center</span>
<span class="w">    </span><span class="mf">1.0</span><span class="p">,</span><span class="w">                      </span><span class="c1">// radius</span>
<span class="w">    </span><span class="mf">2.0</span><span class="p">,</span><span class="w">                      </span><span class="c1">// height</span>
<span class="w">    </span><span class="mi">3</span><span class="w">                         </span><span class="c1">// material_id</span>
<span class="p">);</span>
</pre></div>
</div>
</section>
<section id="plane">
<h4>Plane<a class="headerlink" href="#plane" title="Link to this heading"></a></h4>
<div class="highlight-rust notranslate"><div class="highlight"><pre><span></span><span class="kd">let</span><span class="w"> </span><span class="n">plane</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">SdfPrimitive</span><span class="p">::</span><span class="n">plane</span><span class="p">(</span>
<span class="w">    </span><span class="n">Vec3</span><span class="p">::</span><span class="n">new</span><span class="p">(</span><span class="mf">0.0</span><span class="p">,</span><span class="w"> </span><span class="mf">1.0</span><span class="p">,</span><span class="w"> </span><span class="mf">0.0</span><span class="p">),</span><span class="w"> </span><span class="c1">// normal</span>
<span class="w">    </span><span class="mf">0.0</span><span class="p">,</span><span class="w">                      </span><span class="c1">// distance from origin</span>
<span class="w">    </span><span class="mi">4</span><span class="w">                         </span><span class="c1">// material_id</span>
<span class="p">);</span>
</pre></div>
</div>
</section>
<section id="torus">
<h4>Torus<a class="headerlink" href="#torus" title="Link to this heading"></a></h4>
<div class="highlight-rust notranslate"><div class="highlight"><pre><span></span><span class="kd">let</span><span class="w"> </span><span class="n">torus</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">SdfPrimitive</span><span class="p">::</span><span class="n">torus</span><span class="p">(</span>
<span class="w">    </span><span class="n">Vec3</span><span class="p">::</span><span class="n">new</span><span class="p">(</span><span class="mf">0.0</span><span class="p">,</span><span class="w"> </span><span class="mf">0.0</span><span class="p">,</span><span class="w"> </span><span class="mf">0.0</span><span class="p">),</span><span class="w"> </span><span class="c1">// center</span>
<span class="w">    </span><span class="mf">2.0</span><span class="p">,</span><span class="w">                      </span><span class="c1">// major radius</span>
<span class="w">    </span><span class="mf">0.5</span><span class="p">,</span><span class="w">                      </span><span class="c1">// minor radius</span>
<span class="w">    </span><span class="mi">5</span><span class="w">                         </span><span class="c1">// material_id</span>
<span class="p">);</span>
</pre></div>
</div>
</section>
<section id="capsule">
<h4>Capsule<a class="headerlink" href="#capsule" title="Link to this heading"></a></h4>
<div class="highlight-rust notranslate"><div class="highlight"><pre><span></span><span class="kd">let</span><span class="w"> </span><span class="n">capsule</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">SdfPrimitive</span><span class="p">::</span><span class="n">capsule</span><span class="p">(</span>
<span class="w">    </span><span class="n">Vec3</span><span class="p">::</span><span class="n">new</span><span class="p">(</span><span class="o">-</span><span class="mf">1.0</span><span class="p">,</span><span class="w"> </span><span class="mf">0.0</span><span class="p">,</span><span class="w"> </span><span class="mf">0.0</span><span class="p">),</span><span class="w"> </span><span class="c1">// point A</span>
<span class="w">    </span><span class="n">Vec3</span><span class="p">::</span><span class="n">new</span><span class="p">(</span><span class="mf">1.0</span><span class="p">,</span><span class="w"> </span><span class="mf">0.0</span><span class="p">,</span><span class="w"> </span><span class="mf">0.0</span><span class="p">),</span><span class="w">  </span><span class="c1">// point B</span>
<span class="w">    </span><span class="mf">0.5</span><span class="p">,</span><span class="w">                       </span><span class="c1">// radius</span>
<span class="w">    </span><span class="mi">6</span><span class="w">                          </span><span class="c1">// material_id</span>
<span class="p">);</span>
</pre></div>
</div>
</section>
</section>
<section id="csg-operations">
<h3>CSG Operations<a class="headerlink" href="#csg-operations" title="Link to this heading"></a></h3>
<section id="basic-operations">
<h4>Basic Operations<a class="headerlink" href="#basic-operations" title="Link to this heading"></a></h4>
<div class="highlight-rust notranslate"><div class="highlight"><pre><span></span><span class="c1">// Union: Combines shapes</span>
<span class="kd">let</span><span class="w"> </span><span class="p">(</span><span class="n">builder</span><span class="p">,</span><span class="w"> </span><span class="n">union_node</span><span class="p">)</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">builder</span><span class="p">.</span><span class="k">union</span><span class="p">(</span><span class="n">left_node</span><span class="p">,</span><span class="w"> </span><span class="n">right_node</span><span class="p">,</span><span class="w"> </span><span class="n">material_id</span><span class="p">);</span>

<span class="c1">// Intersection: Keeps only overlap</span>
<span class="kd">let</span><span class="w"> </span><span class="p">(</span><span class="n">builder</span><span class="p">,</span><span class="w"> </span><span class="n">intersect_node</span><span class="p">)</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">builder</span><span class="p">.</span><span class="n">intersect</span><span class="p">(</span><span class="n">left_node</span><span class="p">,</span><span class="w"> </span><span class="n">right_node</span><span class="p">,</span><span class="w"> </span><span class="n">material_id</span><span class="p">);</span>

<span class="c1">// Subtraction: Removes right from left</span>
<span class="kd">let</span><span class="w"> </span><span class="p">(</span><span class="n">builder</span><span class="p">,</span><span class="w"> </span><span class="n">subtract_node</span><span class="p">)</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">builder</span><span class="p">.</span><span class="n">subtract</span><span class="p">(</span><span class="n">left_node</span><span class="p">,</span><span class="w"> </span><span class="n">right_node</span><span class="p">,</span><span class="w"> </span><span class="n">material_id</span><span class="p">);</span>
</pre></div>
</div>
</section>
<section id="smooth-operations">
<h4>Smooth Operations<a class="headerlink" href="#smooth-operations" title="Link to this heading"></a></h4>
<div class="highlight-rust notranslate"><div class="highlight"><pre><span></span><span class="c1">// Smooth union with blending parameter</span>
<span class="kd">let</span><span class="w"> </span><span class="p">(</span><span class="n">builder</span><span class="p">,</span><span class="w"> </span><span class="n">smooth_union</span><span class="p">)</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">builder</span><span class="p">.</span><span class="n">smooth_union</span><span class="p">(</span>
<span class="w">    </span><span class="n">left_node</span><span class="p">,</span>
<span class="w">    </span><span class="n">right_node</span><span class="p">,</span>
<span class="w">    </span><span class="mf">0.2</span><span class="p">,</span><span class="w">        </span><span class="c1">// smoothing amount</span>
<span class="w">    </span><span class="n">material_id</span>
<span class="p">);</span>

<span class="c1">// Smooth subtraction</span>
<span class="kd">let</span><span class="w"> </span><span class="p">(</span><span class="n">builder</span><span class="p">,</span><span class="w"> </span><span class="n">smooth_subtract</span><span class="p">)</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">builder</span><span class="p">.</span><span class="n">smooth_subtract</span><span class="p">(</span>
<span class="w">    </span><span class="n">left_node</span><span class="p">,</span>
<span class="w">    </span><span class="n">right_node</span><span class="p">,</span>
<span class="w">    </span><span class="mf">0.1</span><span class="p">,</span><span class="w">        </span><span class="c1">// smoothing amount</span>
<span class="w">    </span><span class="n">material_id</span>
<span class="p">);</span>
</pre></div>
</div>
</section>
</section>
</section>
<section id="python-api">
<h2>Python API<a class="headerlink" href="#python-api" title="Link to this heading"></a></h2>
<section id="id1">
<h3>Basic Usage<a class="headerlink" href="#id1" title="Link to this heading"></a></h3>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span><span class="w"> </span><span class="nn">forge3d</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">forge3d.sdf</span><span class="w"> </span><span class="kn">import</span> <span class="o">*</span>

<span class="c1"># Create SDF primitives</span>
<span class="n">sphere</span> <span class="o">=</span> <span class="n">SdfPrimitive</span><span class="o">.</span><span class="n">sphere</span><span class="p">((</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">),</span> <span class="mf">1.0</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span>
<span class="n">box</span> <span class="o">=</span> <span class="n">SdfPrimitive</span><span class="o">.</span><span class="n">box</span><span class="p">((</span><span class="mi">2</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">),</span> <span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">),</span> <span class="mi">2</span><span class="p">)</span>

<span class="c1"># Build scene</span>
<span class="n">builder</span> <span class="o">=</span> <span class="n">SdfSceneBuilder</span><span class="p">()</span>
<span class="n">builder</span><span class="p">,</span> <span class="n">sphere_idx</span> <span class="o">=</span> <span class="n">builder</span><span class="o">.</span><span class="n">add_sphere</span><span class="p">((</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">),</span> <span class="mf">1.0</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span>
<span class="n">builder</span><span class="p">,</span> <span class="n">box_idx</span> <span class="o">=</span> <span class="n">builder</span><span class="o">.</span><span class="n">add_box</span><span class="p">((</span><span class="mi">2</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">),</span> <span class="p">(</span><span class="mf">0.8</span><span class="p">,</span> <span class="mf">0.8</span><span class="p">,</span> <span class="mf">0.8</span><span class="p">),</span> <span class="mi">2</span><span class="p">)</span>
<span class="n">builder</span><span class="p">,</span> <span class="n">union_idx</span> <span class="o">=</span> <span class="n">builder</span><span class="o">.</span><span class="n">union</span><span class="p">(</span><span class="n">sphere_idx</span><span class="p">,</span> <span class="n">box_idx</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>

<span class="n">scene</span> <span class="o">=</span> <span class="n">builder</span><span class="o">.</span><span class="n">build</span><span class="p">()</span>

<span class="c1"># Evaluate SDF</span>
<span class="n">distance</span><span class="p">,</span> <span class="n">material</span> <span class="o">=</span> <span class="n">scene</span><span class="o">.</span><span class="n">evaluate</span><span class="p">((</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">))</span>
<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Distance: </span><span class="si">{</span><span class="n">distance</span><span class="si">}</span><span class="s2">, Material: </span><span class="si">{</span><span class="n">material</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
</pre></div>
</div>
</section>
<section id="rendering">
<h3>Rendering<a class="headerlink" href="#rendering" title="Link to this heading"></a></h3>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># Create renderer</span>
<span class="n">renderer</span> <span class="o">=</span> <span class="n">HybridRenderer</span><span class="p">(</span><span class="mi">512</span><span class="p">,</span> <span class="mi">512</span><span class="p">)</span>

<span class="c1"># Set camera</span>
<span class="n">renderer</span><span class="o">.</span><span class="n">set_camera</span><span class="p">(</span>
    <span class="n">origin</span><span class="o">=</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">5</span><span class="p">),</span>
    <span class="n">target</span><span class="o">=</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">),</span>
    <span class="n">up</span><span class="o">=</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">),</span>
    <span class="n">fov_degrees</span><span class="o">=</span><span class="mi">45</span>
<span class="p">)</span>

<span class="c1"># Set traversal mode</span>
<span class="n">renderer</span><span class="o">.</span><span class="n">set_traversal_mode</span><span class="p">(</span><span class="n">TraversalMode</span><span class="o">.</span><span class="n">HYBRID</span><span class="p">)</span>  <span class="c1"># SDF + mesh</span>
<span class="c1"># renderer.set_traversal_mode(TraversalMode.SDF_ONLY)  # SDF only</span>
<span class="c1"># renderer.set_traversal_mode(TraversalMode.MESH_ONLY)  # Mesh only</span>

<span class="c1"># Render scene</span>
<span class="n">image</span> <span class="o">=</span> <span class="n">renderer</span><span class="o">.</span><span class="n">render_sdf_scene</span><span class="p">(</span><span class="n">scene</span><span class="p">)</span>  <span class="c1"># Returns numpy array (H, W, 4)</span>
</pre></div>
</div>
</section>
<section id="convenience-functions">
<h3>Convenience Functions<a class="headerlink" href="#convenience-functions" title="Link to this heading"></a></h3>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># Quick primitive creation</span>
<span class="n">sphere</span> <span class="o">=</span> <span class="n">create_sphere</span><span class="p">((</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">),</span> <span class="mf">1.0</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span>
<span class="n">box</span> <span class="o">=</span> <span class="n">create_box</span><span class="p">((</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">),</span> <span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">),</span> <span class="mi">2</span><span class="p">)</span>

<span class="c1"># Quick scene creation and rendering</span>
<span class="n">scene</span> <span class="o">=</span> <span class="n">create_simple_scene</span><span class="p">()</span>
<span class="n">image</span> <span class="o">=</span> <span class="n">render_simple_scene</span><span class="p">(</span><span class="n">width</span><span class="o">=</span><span class="mi">256</span><span class="p">,</span> <span class="n">height</span><span class="o">=</span><span class="mi">256</span><span class="p">)</span>

<span class="c1"># Save image (if using additional libraries)</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">PIL</span><span class="w"> </span><span class="kn">import</span> <span class="n">Image</span>
<span class="n">Image</span><span class="o">.</span><span class="n">fromarray</span><span class="p">(</span><span class="n">image</span><span class="p">)</span><span class="o">.</span><span class="n">save</span><span class="p">(</span><span class="s1">&#39;output.png&#39;</span><span class="p">)</span>
</pre></div>
</div>
</section>
</section>
<section id="wgsl-shader-interface">
<h2>WGSL Shader Interface<a class="headerlink" href="#wgsl-shader-interface" title="Link to this heading"></a></h2>
<p>The SDF system provides WGSL compute shaders for GPU acceleration:</p>
<section id="include-structure">
<h3>Include Structure<a class="headerlink" href="#include-structure" title="Link to this heading"></a></h3>
<div class="highlight-wgsl notranslate"><div class="highlight"><pre><span></span><span class="err">#</span><span class="n">include</span><span class="w"> </span><span class="err">&quot;</span><span class="n">sdf_primitives</span><span class="p">.</span><span class="kr">wgsl</span><span class="err">&quot;</span><span class="w">    </span><span class="c1">// Basic SDF evaluation functions</span>
<span class="err">#</span><span class="n">include</span><span class="w"> </span><span class="err">&quot;</span><span class="n">sdf_operations</span><span class="p">.</span><span class="kr">wgsl</span><span class="err">&quot;</span><span class="w">    </span><span class="c1">// CSG operations and domain ops</span>
<span class="err">#</span><span class="n">include</span><span class="w"> </span><span class="err">&quot;</span><span class="n">hybrid_traversal</span><span class="p">.</span><span class="kr">wgsl</span><span class="err">&quot;</span><span class="w">  </span><span class="c1">// Hybrid ray intersection</span>
</pre></div>
</div>
</section>
<section id="key-functions">
<h3>Key Functions<a class="headerlink" href="#key-functions" title="Link to this heading"></a></h3>
<section id="sdf-evaluation">
<h4>SDF Evaluation<a class="headerlink" href="#sdf-evaluation" title="Link to this heading"></a></h4>
<div class="highlight-wgsl notranslate"><div class="highlight"><pre><span></span><span class="c1">// Evaluate specific primitive types</span>
<span class="k">fn</span><span class="w"> </span><span class="n">sdf_sphere</span><span class="p">(</span><span class="n">point</span><span class="p">:</span><span class="w"> </span><span class="nb">vec3f</span><span class="p">,</span><span class="w"> </span><span class="n">sphere</span><span class="p">:</span><span class="w"> </span><span class="n">SdfSphere</span><span class="p">)</span><span class="w"> </span><span class="p">-&gt;</span><span class="w"> </span><span class="nb">f32</span><span class="p">;</span>
<span class="k">fn</span><span class="w"> </span><span class="n">sdf_box</span><span class="p">(</span><span class="n">point</span><span class="p">:</span><span class="w"> </span><span class="nb">vec3f</span><span class="p">,</span><span class="w"> </span><span class="n">box</span><span class="p">:</span><span class="w"> </span><span class="n">SdfBox</span><span class="p">)</span><span class="w"> </span><span class="p">-&gt;</span><span class="w"> </span><span class="nb">f32</span><span class="p">;</span>
<span class="k">fn</span><span class="w"> </span><span class="n">sdf_cylinder</span><span class="p">(</span><span class="n">point</span><span class="p">:</span><span class="w"> </span><span class="nb">vec3f</span><span class="p">,</span><span class="w"> </span><span class="n">cylinder</span><span class="p">:</span><span class="w"> </span><span class="n">SdfCylinder</span><span class="p">)</span><span class="w"> </span><span class="p">-&gt;</span><span class="w"> </span><span class="nb">f32</span><span class="p">;</span>

<span class="c1">// Generic primitive evaluation</span>
<span class="k">fn</span><span class="w"> </span><span class="n">evaluate_sdf_primitive</span><span class="p">(</span><span class="n">point</span><span class="p">:</span><span class="w"> </span><span class="nb">vec3f</span><span class="p">,</span><span class="w"> </span><span class="n">primitive</span><span class="p">:</span><span class="w"> </span><span class="n">SdfPrimitive</span><span class="p">)</span><span class="w"> </span><span class="p">-&gt;</span><span class="w"> </span><span class="nb">f32</span><span class="p">;</span>

<span class="c1">// Normal calculation using finite differences</span>
<span class="k">fn</span><span class="w"> </span><span class="n">sdf_normal</span><span class="p">(</span><span class="n">point</span><span class="p">:</span><span class="w"> </span><span class="nb">vec3f</span><span class="p">,</span><span class="w"> </span><span class="n">primitive</span><span class="p">:</span><span class="w"> </span><span class="n">SdfPrimitive</span><span class="p">)</span><span class="w"> </span><span class="p">-&gt;</span><span class="w"> </span><span class="nb">vec3f</span><span class="p">;</span>
</pre></div>
</div>
</section>
<section id="id2">
<h4>CSG Operations<a class="headerlink" href="#id2" title="Link to this heading"></a></h4>
<div class="highlight-wgsl notranslate"><div class="highlight"><pre><span></span><span class="c1">// Basic CSG operations</span>
<span class="k">fn</span><span class="w"> </span><span class="n">csg_union</span><span class="p">(</span><span class="n">a</span><span class="p">:</span><span class="w"> </span><span class="n">CsgResult</span><span class="p">,</span><span class="w"> </span><span class="n">b</span><span class="p">:</span><span class="w"> </span><span class="n">CsgResult</span><span class="p">)</span><span class="w"> </span><span class="p">-&gt;</span><span class="w"> </span><span class="n">CsgResult</span><span class="p">;</span>
<span class="k">fn</span><span class="w"> </span><span class="n">csg_intersection</span><span class="p">(</span><span class="n">a</span><span class="p">:</span><span class="w"> </span><span class="n">CsgResult</span><span class="p">,</span><span class="w"> </span><span class="n">b</span><span class="p">:</span><span class="w"> </span><span class="n">CsgResult</span><span class="p">)</span><span class="w"> </span><span class="p">-&gt;</span><span class="w"> </span><span class="n">CsgResult</span><span class="p">;</span>
<span class="k">fn</span><span class="w"> </span><span class="n">csg_subtraction</span><span class="p">(</span><span class="n">a</span><span class="p">:</span><span class="w"> </span><span class="n">CsgResult</span><span class="p">,</span><span class="w"> </span><span class="n">b</span><span class="p">:</span><span class="w"> </span><span class="n">CsgResult</span><span class="p">)</span><span class="w"> </span><span class="p">-&gt;</span><span class="w"> </span><span class="n">CsgResult</span><span class="p">;</span>

<span class="c1">// Smooth CSG operations</span>
<span class="k">fn</span><span class="w"> </span><span class="n">csg_smooth_union</span><span class="p">(</span><span class="n">a</span><span class="p">:</span><span class="w"> </span><span class="n">CsgResult</span><span class="p">,</span><span class="w"> </span><span class="n">b</span><span class="p">:</span><span class="w"> </span><span class="n">CsgResult</span><span class="p">,</span><span class="w"> </span><span class="n">k</span><span class="p">:</span><span class="w"> </span><span class="nb">f32</span><span class="p">)</span><span class="w"> </span><span class="p">-&gt;</span><span class="w"> </span><span class="n">CsgResult</span><span class="p">;</span>
<span class="k">fn</span><span class="w"> </span><span class="n">csg_smooth_intersection</span><span class="p">(</span><span class="n">a</span><span class="p">:</span><span class="w"> </span><span class="n">CsgResult</span><span class="p">,</span><span class="w"> </span><span class="n">b</span><span class="p">:</span><span class="w"> </span><span class="n">CsgResult</span><span class="p">,</span><span class="w"> </span><span class="n">k</span><span class="p">:</span><span class="w"> </span><span class="nb">f32</span><span class="p">)</span><span class="w"> </span><span class="p">-&gt;</span><span class="w"> </span><span class="n">CsgResult</span><span class="p">;</span>
<span class="k">fn</span><span class="w"> </span><span class="n">csg_smooth_subtraction</span><span class="p">(</span><span class="n">a</span><span class="p">:</span><span class="w"> </span><span class="n">CsgResult</span><span class="p">,</span><span class="w"> </span><span class="n">b</span><span class="p">:</span><span class="w"> </span><span class="n">CsgResult</span><span class="p">,</span><span class="w"> </span><span class="n">k</span><span class="p">:</span><span class="w"> </span><span class="nb">f32</span><span class="p">)</span><span class="w"> </span><span class="p">-&gt;</span><span class="w"> </span><span class="n">CsgResult</span><span class="p">;</span>

<span class="c1">// Apply operation by type</span>
<span class="k">fn</span><span class="w"> </span><span class="n">apply_csg_operation</span><span class="p">(</span><span class="n">operation</span><span class="p">:</span><span class="w"> </span><span class="nb">u32</span><span class="p">,</span><span class="w"> </span><span class="n">a</span><span class="p">:</span><span class="w"> </span><span class="n">CsgResult</span><span class="p">,</span><span class="w"> </span><span class="n">b</span><span class="p">:</span><span class="w"> </span><span class="n">CsgResult</span><span class="p">,</span><span class="w"> </span><span class="n">smoothing</span><span class="p">:</span><span class="w"> </span><span class="nb">f32</span><span class="p">)</span><span class="w"> </span><span class="p">-&gt;</span><span class="w"> </span><span class="n">CsgResult</span><span class="p">;</span>
</pre></div>
</div>
</section>
<section id="id3">
<h4>Hybrid Traversal<a class="headerlink" href="#id3" title="Link to this heading"></a></h4>
<div class="highlight-wgsl notranslate"><div class="highlight"><pre><span></span><span class="c1">// Main hybrid intersection function</span>
<span class="k">fn</span><span class="w"> </span><span class="n">intersect_hybrid</span><span class="p">(</span><span class="n">ray</span><span class="p">:</span><span class="w"> </span><span class="n">Ray</span><span class="p">)</span><span class="w"> </span><span class="p">-&gt;</span><span class="w"> </span><span class="n">HybridHitResult</span><span class="p">;</span>

<span class="c1">// Optimized version with early termination</span>
<span class="k">fn</span><span class="w"> </span><span class="n">intersect_hybrid_optimized</span><span class="p">(</span><span class="n">ray</span><span class="p">:</span><span class="w"> </span><span class="n">Ray</span><span class="p">,</span><span class="w"> </span><span class="n">early_exit_distance</span><span class="p">:</span><span class="w"> </span><span class="nb">f32</span><span class="p">)</span><span class="w"> </span><span class="p">-&gt;</span><span class="w"> </span><span class="n">HybridHitResult</span><span class="p">;</span>

<span class="c1">// SDF raymarching</span>
<span class="k">fn</span><span class="w"> </span><span class="n">raymarch_sdf</span><span class="p">(</span><span class="n">ray</span><span class="p">:</span><span class="w"> </span><span class="n">Ray</span><span class="p">)</span><span class="w"> </span><span class="p">-&gt;</span><span class="w"> </span><span class="n">HybridHitResult</span><span class="p">;</span>

<span class="c1">// Mesh intersection (BVH traversal)</span>
<span class="k">fn</span><span class="w"> </span><span class="n">intersect_mesh</span><span class="p">(</span><span class="n">ray</span><span class="p">:</span><span class="w"> </span><span class="n">Ray</span><span class="p">)</span><span class="w"> </span><span class="p">-&gt;</span><span class="w"> </span><span class="n">HybridHitResult</span><span class="p">;</span>

<span class="c1">// Surface properties</span>
<span class="k">fn</span><span class="w"> </span><span class="n">get_surface_properties</span><span class="p">(</span><span class="n">hit</span><span class="p">:</span><span class="w"> </span><span class="n">HybridHitResult</span><span class="p">)</span><span class="w"> </span><span class="p">-&gt;</span><span class="w"> </span><span class="nb">vec3f</span><span class="p">;</span>

<span class="c1">// Shadow testing</span>
<span class="k">fn</span><span class="w"> </span><span class="n">intersect_shadow_ray</span><span class="p">(</span><span class="n">ray</span><span class="p">:</span><span class="w"> </span><span class="n">Ray</span><span class="p">,</span><span class="w"> </span><span class="n">max_distance</span><span class="p">:</span><span class="w"> </span><span class="nb">f32</span><span class="p">)</span><span class="w"> </span><span class="p">-&gt;</span><span class="w"> </span><span class="nb">bool</span><span class="p">;</span>
<span class="k">fn</span><span class="w"> </span><span class="n">soft_shadow_factor</span><span class="p">(</span><span class="n">ray</span><span class="p">:</span><span class="w"> </span><span class="n">Ray</span><span class="p">,</span><span class="w"> </span><span class="n">max_distance</span><span class="p">:</span><span class="w"> </span><span class="nb">f32</span><span class="p">,</span><span class="w"> </span><span class="n">softness</span><span class="p">:</span><span class="w"> </span><span class="nb">f32</span><span class="p">)</span><span class="w"> </span><span class="p">-&gt;</span><span class="w"> </span><span class="nb">f32</span><span class="p">;</span>
</pre></div>
</div>
</section>
</section>
<section id="data-structures">
<h3>Data Structures<a class="headerlink" href="#data-structures" title="Link to this heading"></a></h3>
<section id="primitives">
<h4>Primitives<a class="headerlink" href="#primitives" title="Link to this heading"></a></h4>
<div class="highlight-wgsl notranslate"><div class="highlight"><pre><span></span><span class="k">struct</span><span class="w"> </span><span class="n">SdfPrimitive</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="n">primitive_type</span><span class="p">:</span><span class="w"> </span><span class="nb">u32</span><span class="p">,</span>
<span class="w">    </span><span class="n">material_id</span><span class="p">:</span><span class="w"> </span><span class="nb">u32</span><span class="p">,</span>
<span class="w">    </span><span class="n">_pad</span><span class="p">:</span><span class="w"> </span><span class="nb">vec2u</span><span class="p">,</span>
<span class="w">    </span><span class="n">params</span><span class="p">:</span><span class="w"> </span><span class="nb">array</span><span class="o">&lt;</span><span class="nb">f32</span><span class="p">,</span><span class="w"> </span><span class="mi">16</span><span class="o">&gt;</span><span class="p">,</span><span class="w">  </span><span class="c1">// Primitive-specific parameters</span>
<span class="p">}</span>

<span class="k">struct</span><span class="w"> </span><span class="n">SdfSphere</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="nb">center</span><span class="p">:</span><span class="w"> </span><span class="nb">vec3f</span><span class="p">,</span>
<span class="w">    </span><span class="n">radius</span><span class="p">:</span><span class="w"> </span><span class="nb">f32</span><span class="p">,</span>
<span class="p">}</span>

<span class="k">struct</span><span class="w"> </span><span class="n">SdfBox</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="nb">center</span><span class="p">:</span><span class="w"> </span><span class="nb">vec3f</span><span class="p">,</span>
<span class="w">    </span><span class="n">_pad1</span><span class="p">:</span><span class="w"> </span><span class="nb">f32</span><span class="p">,</span>
<span class="w">    </span><span class="n">extents</span><span class="p">:</span><span class="w"> </span><span class="nb">vec3f</span><span class="p">,</span>
<span class="w">    </span><span class="n">_pad2</span><span class="p">:</span><span class="w"> </span><span class="nb">f32</span><span class="p">,</span>
<span class="p">}</span>
</pre></div>
</div>
</section>
<section id="csg-tree">
<h4>CSG Tree<a class="headerlink" href="#csg-tree" title="Link to this heading"></a></h4>
<div class="highlight-wgsl notranslate"><div class="highlight"><pre><span></span><span class="k">struct</span><span class="w"> </span><span class="n">CsgNode</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="n">operation</span><span class="p">:</span><span class="w"> </span><span class="nb">u32</span><span class="p">,</span><span class="w">      </span><span class="c1">// Operation type</span>
<span class="w">    </span><span class="n">left_child</span><span class="p">:</span><span class="w"> </span><span class="nb">u32</span><span class="p">,</span><span class="w">     </span><span class="c1">// Left child index</span>
<span class="w">    </span><span class="n">right_child</span><span class="p">:</span><span class="w"> </span><span class="nb">u32</span><span class="p">,</span><span class="w">    </span><span class="c1">// Right child index</span>
<span class="w">    </span><span class="n">smoothing</span><span class="p">:</span><span class="w"> </span><span class="nb">f32</span><span class="p">,</span><span class="w">      </span><span class="c1">// Smoothing parameter</span>
<span class="w">    </span><span class="n">material_id</span><span class="p">:</span><span class="w"> </span><span class="nb">u32</span><span class="p">,</span><span class="w">    </span><span class="c1">// Material ID</span>
<span class="w">    </span><span class="n">is_leaf</span><span class="p">:</span><span class="w"> </span><span class="nb">u32</span><span class="p">,</span><span class="w">        </span><span class="c1">// 1 if leaf node, 0 if operation</span>
<span class="w">    </span><span class="n">_pad</span><span class="p">:</span><span class="w"> </span><span class="nb">vec2u</span><span class="p">,</span>
<span class="p">}</span>

<span class="k">struct</span><span class="w"> </span><span class="n">CsgResult</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="n">distance</span><span class="p">:</span><span class="w"> </span><span class="nb">f32</span><span class="p">,</span><span class="w">       </span><span class="c1">// Signed distance</span>
<span class="w">    </span><span class="n">material_id</span><span class="p">:</span><span class="w"> </span><span class="nb">u32</span><span class="p">,</span><span class="w">    </span><span class="c1">// Material identifier</span>
<span class="p">}</span>
</pre></div>
</div>
</section>
<section id="hybrid-results">
<h4>Hybrid Results<a class="headerlink" href="#hybrid-results" title="Link to this heading"></a></h4>
<div class="highlight-wgsl notranslate"><div class="highlight"><pre><span></span><span class="k">struct</span><span class="w"> </span><span class="n">HybridHitResult</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="n">t</span><span class="p">:</span><span class="w"> </span><span class="nb">f32</span><span class="p">,</span><span class="w">              </span><span class="c1">// Ray parameter</span>
<span class="w">    </span><span class="n">point</span><span class="p">:</span><span class="w"> </span><span class="nb">vec3f</span><span class="p">,</span><span class="w">        </span><span class="c1">// Hit point in world space</span>
<span class="w">    </span><span class="n">normal</span><span class="p">:</span><span class="w"> </span><span class="nb">vec3f</span><span class="p">,</span><span class="w">       </span><span class="c1">// Surface normal</span>
<span class="w">    </span><span class="n">material_id</span><span class="p">:</span><span class="w"> </span><span class="nb">u32</span><span class="p">,</span><span class="w">    </span><span class="c1">// Material identifier</span>
<span class="w">    </span><span class="n">hit_type</span><span class="p">:</span><span class="w"> </span><span class="nb">u32</span><span class="p">,</span><span class="w">       </span><span class="c1">// 0 = mesh, 1 = SDF</span>
<span class="w">    </span><span class="n">hit</span><span class="p">:</span><span class="w"> </span><span class="nb">u32</span><span class="p">,</span><span class="w">            </span><span class="c1">// 0 = no hit, 1 = hit</span>
<span class="w">    </span><span class="n">_pad</span><span class="p">:</span><span class="w"> </span><span class="nb">vec2u</span><span class="p">,</span>
<span class="p">}</span>
</pre></div>
</div>
</section>
</section>
</section>
<section id="performance-considerations">
<h2>Performance Considerations<a class="headerlink" href="#performance-considerations" title="Link to this heading"></a></h2>
<section id="optimization-techniques">
<h3>Optimization Techniques<a class="headerlink" href="#optimization-techniques" title="Link to this heading"></a></h3>
<ol class="arabic simple">
<li><p><strong>Early Ray Termination</strong>: Stop raymarching when close enough to surface</p></li>
<li><p><strong>Bounding Volumes</strong>: Use scene bounds to cull rays early</p></li>
<li><p><strong>Adaptive Step Sizes</strong>: Larger steps in empty space, smaller near surfaces</p></li>
<li><p><strong>LOD System</strong>: Use different detail levels based on distance</p></li>
<li><p><strong>Hybrid Rendering</strong>: Combine fast BVH traversal with flexible SDF raymarching</p></li>
</ol>
</section>
<section id="performance-metrics">
<h3>Performance Metrics<a class="headerlink" href="#performance-metrics" title="Link to this heading"></a></h3>
<p>The system tracks several performance metrics:</p>
<div class="highlight-rust notranslate"><div class="highlight"><pre><span></span><span class="k">struct</span><span class="w"> </span><span class="nc">HybridMetrics</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="n">sdf_steps</span><span class="p">:</span><span class="w"> </span><span class="kt">u32</span><span class="p">,</span><span class="w">           </span><span class="c1">// Total raymarching steps</span>
<span class="w">    </span><span class="n">bvh_nodes_visited</span><span class="p">:</span><span class="w"> </span><span class="kt">u32</span><span class="p">,</span><span class="w">   </span><span class="c1">// BVH nodes traversed</span>
<span class="w">    </span><span class="n">triangle_tests</span><span class="p">:</span><span class="w"> </span><span class="kt">u32</span><span class="p">,</span><span class="w">      </span><span class="c1">// Triangle intersection tests</span>
<span class="w">    </span><span class="n">total_rays</span><span class="p">:</span><span class="w"> </span><span class="kt">u32</span><span class="p">,</span><span class="w">          </span><span class="c1">// Total rays cast</span>
<span class="w">    </span><span class="n">sdf_hits</span><span class="p">:</span><span class="w"> </span><span class="kt">u32</span><span class="p">,</span><span class="w">            </span><span class="c1">// Rays hitting SDF geometry</span>
<span class="w">    </span><span class="n">mesh_hits</span><span class="p">:</span><span class="w"> </span><span class="kt">u32</span><span class="p">,</span><span class="w">           </span><span class="c1">// Rays hitting mesh geometry</span>
<span class="p">}</span>

<span class="c1">// Calculate performance overhead vs mesh-only rendering</span>
<span class="kd">let</span><span class="w"> </span><span class="n">overhead</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">metrics</span><span class="p">.</span><span class="n">performance_overhead</span><span class="p">();</span><span class="w">  </span><span class="c1">// Returns ratio</span>
</pre></div>
</div>
</section>
<section id="tuning-parameters">
<h3>Tuning Parameters<a class="headerlink" href="#tuning-parameters" title="Link to this heading"></a></h3>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># Performance tuning</span>
<span class="n">renderer</span> <span class="o">=</span> <span class="n">HybridRenderer</span><span class="p">(</span><span class="mi">512</span><span class="p">,</span> <span class="mi">512</span><span class="p">)</span>
<span class="n">renderer</span><span class="o">.</span><span class="n">set_performance_params</span><span class="p">(</span>
    <span class="n">early_exit_distance</span><span class="o">=</span><span class="mf">0.01</span><span class="p">,</span>  <span class="c1"># Ray termination threshold</span>
    <span class="n">shadow_softness</span><span class="o">=</span><span class="mf">4.0</span>        <span class="c1"># Soft shadow quality vs speed</span>
<span class="p">)</span>
</pre></div>
</div>
</section>
</section>
<section id="common-usage-patterns">
<h2>Common Usage Patterns<a class="headerlink" href="#common-usage-patterns" title="Link to this heading"></a></h2>
<section id="creating-complex-geometry">
<h3>Creating Complex Geometry<a class="headerlink" href="#creating-complex-geometry" title="Link to this heading"></a></h3>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">def</span><span class="w"> </span><span class="nf">create_complex_shape</span><span class="p">():</span>
    <span class="n">builder</span> <span class="o">=</span> <span class="n">SdfSceneBuilder</span><span class="p">()</span>

    <span class="c1"># Main body: union of two spheres</span>
    <span class="n">builder</span><span class="p">,</span> <span class="n">sphere1</span> <span class="o">=</span> <span class="n">builder</span><span class="o">.</span><span class="n">add_sphere</span><span class="p">((</span><span class="o">-</span><span class="mf">0.5</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">),</span> <span class="mf">0.8</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span>
    <span class="n">builder</span><span class="p">,</span> <span class="n">sphere2</span> <span class="o">=</span> <span class="n">builder</span><span class="o">.</span><span class="n">add_sphere</span><span class="p">((</span><span class="mf">0.5</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">),</span> <span class="mf">0.8</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span>
    <span class="n">builder</span><span class="p">,</span> <span class="n">body</span> <span class="o">=</span> <span class="n">builder</span><span class="o">.</span><span class="n">smooth_union</span><span class="p">(</span><span class="n">sphere1</span><span class="p">,</span> <span class="n">sphere2</span><span class="p">,</span> <span class="mf">0.2</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span>

    <span class="c1"># Subtract a hole through the middle</span>
    <span class="n">builder</span><span class="p">,</span> <span class="n">hole</span> <span class="o">=</span> <span class="n">builder</span><span class="o">.</span><span class="n">add_cylinder</span><span class="p">((</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">),</span> <span class="mf">0.3</span><span class="p">,</span> <span class="mf">2.0</span><span class="p">,</span> <span class="mi">2</span><span class="p">)</span>
    <span class="n">builder</span><span class="p">,</span> <span class="n">result</span> <span class="o">=</span> <span class="n">builder</span><span class="o">.</span><span class="n">subtract</span><span class="p">(</span><span class="n">body</span><span class="p">,</span> <span class="n">hole</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span>

    <span class="k">return</span> <span class="n">builder</span><span class="o">.</span><span class="n">build</span><span class="p">()</span>
</pre></div>
</div>
</section>
<section id="material-based-rendering">
<h3>Material-Based Rendering<a class="headerlink" href="#material-based-rendering" title="Link to this heading"></a></h3>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">def</span><span class="w"> </span><span class="nf">render_with_materials</span><span class="p">(</span><span class="n">scene</span><span class="p">):</span>
    <span class="n">renderer</span> <span class="o">=</span> <span class="n">HybridRenderer</span><span class="p">(</span><span class="mi">512</span><span class="p">,</span> <span class="mi">512</span><span class="p">)</span>

    <span class="c1"># Material properties are handled in the shader</span>
    <span class="c1"># Material IDs can be used to index into material arrays</span>
    <span class="n">image</span> <span class="o">=</span> <span class="n">renderer</span><span class="o">.</span><span class="n">render_sdf_scene</span><span class="p">(</span><span class="n">scene</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">image</span>
</pre></div>
</div>
</section>
<section id="animation-and-deformation">
<h3>Animation and Deformation<a class="headerlink" href="#animation-and-deformation" title="Link to this heading"></a></h3>
<div class="highlight-rust notranslate"><div class="highlight"><pre><span></span><span class="c1">// Animated scene (requires rebuilding per frame)</span>
<span class="k">fn</span><span class="w"> </span><span class="nf">create_animated_scene</span><span class="p">(</span><span class="n">time</span><span class="p">:</span><span class="w"> </span><span class="kt">f32</span><span class="p">)</span><span class="w"> </span><span class="p">-&gt;</span><span class="w"> </span><span class="nc">SdfScene</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="kd">let</span><span class="w"> </span><span class="n">offset</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">Vec3</span><span class="p">::</span><span class="n">new</span><span class="p">(</span><span class="n">time</span><span class="p">.</span><span class="n">sin</span><span class="p">()</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="mf">2.0</span><span class="p">,</span><span class="w"> </span><span class="mf">0.0</span><span class="p">,</span><span class="w"> </span><span class="mf">0.0</span><span class="p">);</span>
<span class="w">    </span><span class="kd">let</span><span class="w"> </span><span class="p">(</span><span class="n">builder</span><span class="p">,</span><span class="w"> </span><span class="n">sphere_idx</span><span class="p">)</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">SdfSceneBuilder</span><span class="p">::</span><span class="n">new</span><span class="p">()</span>
<span class="w">        </span><span class="p">.</span><span class="n">add_sphere</span><span class="p">(</span><span class="n">offset</span><span class="p">,</span><span class="w"> </span><span class="mf">1.0</span><span class="p">,</span><span class="w"> </span><span class="mi">1</span><span class="p">);</span>

<span class="w">    </span><span class="n">builder</span><span class="p">.</span><span class="n">build</span><span class="p">()</span>
<span class="p">}</span>
</pre></div>
</div>
</section>
</section>
<section id="error-handling">
<h2>Error Handling<a class="headerlink" href="#error-handling" title="Link to this heading"></a></h2>
<section id="rust-error-types">
<h3>Rust Error Types<a class="headerlink" href="#rust-error-types" title="Link to this heading"></a></h3>
<div class="highlight-rust notranslate"><div class="highlight"><pre><span></span><span class="k">use</span><span class="w"> </span><span class="n">forge3d</span><span class="p">::</span><span class="n">error</span><span class="p">::</span><span class="n">RenderError</span><span class="p">;</span>

<span class="k">match</span><span class="w"> </span><span class="n">hybrid_scene</span><span class="p">.</span><span class="n">prepare_gpu_resources</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="nb">Ok</span><span class="p">(())</span><span class="w"> </span><span class="o">=&gt;</span><span class="w"> </span><span class="fm">println!</span><span class="p">(</span><span class="s">&quot;GPU resources ready&quot;</span><span class="p">),</span>
<span class="w">    </span><span class="nb">Err</span><span class="p">(</span><span class="n">RenderError</span><span class="p">::</span><span class="n">Upload</span><span class="p">(</span><span class="n">msg</span><span class="p">))</span><span class="w"> </span><span class="o">=&gt;</span><span class="w"> </span><span class="fm">eprintln!</span><span class="p">(</span><span class="s">&quot;Upload failed: {}&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">msg</span><span class="p">),</span>
<span class="w">    </span><span class="nb">Err</span><span class="p">(</span><span class="n">RenderError</span><span class="p">::</span><span class="n">Device</span><span class="p">(</span><span class="n">msg</span><span class="p">))</span><span class="w"> </span><span class="o">=&gt;</span><span class="w"> </span><span class="fm">eprintln!</span><span class="p">(</span><span class="s">&quot;Device error: {}&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">msg</span><span class="p">),</span>
<span class="w">    </span><span class="nb">Err</span><span class="p">(</span><span class="n">e</span><span class="p">)</span><span class="w"> </span><span class="o">=&gt;</span><span class="w"> </span><span class="fm">eprintln!</span><span class="p">(</span><span class="s">&quot;Other error: {}&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">e</span><span class="p">),</span>
<span class="p">}</span>
</pre></div>
</div>
</section>
<section id="python-error-handling">
<h3>Python Error Handling<a class="headerlink" href="#python-error-handling" title="Link to this heading"></a></h3>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">try</span><span class="p">:</span>
    <span class="n">image</span> <span class="o">=</span> <span class="n">renderer</span><span class="o">.</span><span class="n">render_sdf_scene</span><span class="p">(</span><span class="n">scene</span><span class="p">)</span>
<span class="k">except</span> <span class="ne">RuntimeError</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
    <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Rendering failed: </span><span class="si">{</span><span class="n">e</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
    <span class="c1"># Fall back to CPU rendering or default scene</span>
    <span class="n">image</span> <span class="o">=</span> <span class="n">render_fallback_scene</span><span class="p">()</span>
</pre></div>
</div>
</section>
</section>
<section id="debugging-and-visualization">
<h2>Debugging and Visualization<a class="headerlink" href="#debugging-and-visualization" title="Link to this heading"></a></h2>
<section id="sdf-visualization">
<h3>SDF Visualization<a class="headerlink" href="#sdf-visualization" title="Link to this heading"></a></h3>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">def</span><span class="w"> </span><span class="nf">visualize_sdf_distances</span><span class="p">(</span><span class="n">scene</span><span class="p">,</span> <span class="n">bounds</span><span class="o">=</span><span class="p">(</span><span class="o">-</span><span class="mi">2</span><span class="p">,</span> <span class="mi">2</span><span class="p">),</span> <span class="n">resolution</span><span class="o">=</span><span class="mi">100</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Create a 2D slice visualization of SDF distances&quot;&quot;&quot;</span>
    <span class="kn">import</span><span class="w"> </span><span class="nn">numpy</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="nn">np</span>

    <span class="n">x</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">linspace</span><span class="p">(</span><span class="n">bounds</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="n">bounds</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span> <span class="n">resolution</span><span class="p">)</span>
    <span class="n">y</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">linspace</span><span class="p">(</span><span class="n">bounds</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="n">bounds</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span> <span class="n">resolution</span><span class="p">)</span>
    <span class="n">distances</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">zeros</span><span class="p">((</span><span class="n">resolution</span><span class="p">,</span> <span class="n">resolution</span><span class="p">))</span>

    <span class="k">for</span> <span class="n">i</span><span class="p">,</span> <span class="n">px</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">x</span><span class="p">):</span>
        <span class="k">for</span> <span class="n">j</span><span class="p">,</span> <span class="n">py</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">y</span><span class="p">):</span>
            <span class="n">distance</span><span class="p">,</span> <span class="n">_</span> <span class="o">=</span> <span class="n">scene</span><span class="o">.</span><span class="n">evaluate</span><span class="p">((</span><span class="n">px</span><span class="p">,</span> <span class="n">py</span><span class="p">,</span> <span class="mi">0</span><span class="p">))</span>
            <span class="n">distances</span><span class="p">[</span><span class="n">j</span><span class="p">,</span> <span class="n">i</span><span class="p">]</span> <span class="o">=</span> <span class="n">distance</span>

    <span class="k">return</span> <span class="n">distances</span>
</pre></div>
</div>
</section>
<section id="performance-profiling">
<h3>Performance Profiling<a class="headerlink" href="#performance-profiling" title="Link to this heading"></a></h3>
<div class="highlight-rust notranslate"><div class="highlight"><pre><span></span><span class="k">use</span><span class="w"> </span><span class="n">std</span><span class="p">::</span><span class="n">time</span><span class="p">::</span><span class="n">Instant</span><span class="p">;</span>

<span class="kd">let</span><span class="w"> </span><span class="n">start</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">Instant</span><span class="p">::</span><span class="n">now</span><span class="p">();</span>
<span class="kd">let</span><span class="w"> </span><span class="n">result</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">hybrid_scene</span><span class="p">.</span><span class="n">intersect</span><span class="p">(</span><span class="n">ray</span><span class="p">);</span>
<span class="kd">let</span><span class="w"> </span><span class="n">duration</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">start</span><span class="p">.</span><span class="n">elapsed</span><span class="p">();</span>

<span class="fm">println!</span><span class="p">(</span><span class="s">&quot;Ray intersection took: {:?}&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">duration</span><span class="p">);</span>
</pre></div>
</div>
</section>
</section>
<section id="advanced-features">
<h2>Advanced Features<a class="headerlink" href="#advanced-features" title="Link to this heading"></a></h2>
<section id="domain-operations">
<h3>Domain Operations<a class="headerlink" href="#domain-operations" title="Link to this heading"></a></h3>
<p>The system supports domain transformation operations for creating procedural patterns:</p>
<div class="highlight-wgsl notranslate"><div class="highlight"><pre><span></span><span class="c1">// Infinite repetition</span>
<span class="k">fn</span><span class="w"> </span><span class="n">domain_repeat_infinite</span><span class="p">(</span><span class="n">point</span><span class="p">:</span><span class="w"> </span><span class="nb">vec3f</span><span class="p">,</span><span class="w"> </span><span class="n">spacing</span><span class="p">:</span><span class="w"> </span><span class="nb">vec3f</span><span class="p">)</span><span class="w"> </span><span class="p">-&gt;</span><span class="w"> </span><span class="nb">vec3f</span><span class="p">;</span>

<span class="c1">// Limited repetition</span>
<span class="k">fn</span><span class="w"> </span><span class="n">domain_repeat_limited</span><span class="p">(</span><span class="n">point</span><span class="p">:</span><span class="w"> </span><span class="nb">vec3f</span><span class="p">,</span><span class="w"> </span><span class="n">spacing</span><span class="p">:</span><span class="w"> </span><span class="nb">vec3f</span><span class="p">,</span><span class="w"> </span><span class="n">limit</span><span class="p">:</span><span class="w"> </span><span class="nb">vec3f</span><span class="p">)</span><span class="w"> </span><span class="p">-&gt;</span><span class="w"> </span><span class="nb">vec3f</span><span class="p">;</span>

<span class="c1">// Twist transformation</span>
<span class="k">fn</span><span class="w"> </span><span class="n">domain_twist</span><span class="p">(</span><span class="n">point</span><span class="p">:</span><span class="w"> </span><span class="nb">vec3f</span><span class="p">,</span><span class="w"> </span><span class="n">twist_amount</span><span class="p">:</span><span class="w"> </span><span class="nb">f32</span><span class="p">)</span><span class="w"> </span><span class="p">-&gt;</span><span class="w"> </span><span class="nb">vec3f</span><span class="p">;</span>

<span class="c1">// Bend transformation</span>
<span class="k">fn</span><span class="w"> </span><span class="n">domain_bend</span><span class="p">(</span><span class="n">point</span><span class="p">:</span><span class="w"> </span><span class="nb">vec3f</span><span class="p">,</span><span class="w"> </span><span class="n">bend_amount</span><span class="p">:</span><span class="w"> </span><span class="nb">f32</span><span class="p">)</span><span class="w"> </span><span class="p">-&gt;</span><span class="w"> </span><span class="nb">vec3f</span><span class="p">;</span>
</pre></div>
</div>
</section>
<section id="soft-shadows">
<h3>Soft Shadows<a class="headerlink" href="#soft-shadows" title="Link to this heading"></a></h3>
<p>SDF geometry enables high-quality soft shadows:</p>
<div class="highlight-wgsl notranslate"><div class="highlight"><pre><span></span><span class="k">fn</span><span class="w"> </span><span class="n">soft_shadow_factor</span><span class="p">(</span><span class="n">ray</span><span class="p">:</span><span class="w"> </span><span class="n">Ray</span><span class="p">,</span><span class="w"> </span><span class="n">max_distance</span><span class="p">:</span><span class="w"> </span><span class="nb">f32</span><span class="p">,</span><span class="w"> </span><span class="n">softness</span><span class="p">:</span><span class="w"> </span><span class="nb">f32</span><span class="p">)</span><span class="w"> </span><span class="p">-&gt;</span><span class="w"> </span><span class="nb">f32</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="c1">// Returns 0.0 (full shadow) to 1.0 (no shadow)</span>
<span class="w">    </span><span class="c1">// Uses SDF field to compute penumbra</span>
<span class="p">}</span>
</pre></div>
</div>
</section>
<section id="ambient-occlusion">
<h3>Ambient Occlusion<a class="headerlink" href="#ambient-occlusion" title="Link to this heading"></a></h3>
<p>SDFs can provide efficient ambient occlusion calculation:</p>
<div class="highlight-rust notranslate"><div class="highlight"><pre><span></span><span class="k">fn</span><span class="w"> </span><span class="nf">calculate_ambient_occlusion</span><span class="p">(</span><span class="n">point</span><span class="p">:</span><span class="w"> </span><span class="nc">Vec3</span><span class="p">,</span><span class="w"> </span><span class="n">normal</span><span class="p">:</span><span class="w"> </span><span class="nc">Vec3</span><span class="p">,</span><span class="w"> </span><span class="n">scene</span><span class="p">:</span><span class="w"> </span><span class="kp">&amp;</span><span class="nc">SdfScene</span><span class="p">)</span><span class="w"> </span><span class="p">-&gt;</span><span class="w"> </span><span class="kt">f32</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="kd">let</span><span class="w"> </span><span class="k">mut</span><span class="w"> </span><span class="n">occlusion</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mf">0.0</span><span class="p">;</span>
<span class="w">    </span><span class="kd">let</span><span class="w"> </span><span class="n">step_size</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mf">0.1</span><span class="p">;</span>
<span class="w">    </span><span class="kd">let</span><span class="w"> </span><span class="n">max_distance</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mf">1.0</span><span class="p">;</span>

<span class="w">    </span><span class="k">for</span><span class="w"> </span><span class="n">i</span><span class="w"> </span><span class="k">in</span><span class="w"> </span><span class="mi">1</span><span class="o">..=</span><span class="mi">5</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="kd">let</span><span class="w"> </span><span class="n">sample_point</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">point</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">normal</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="p">(</span><span class="n">step_size</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="n">i</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="kt">f32</span><span class="p">);</span>
<span class="w">        </span><span class="kd">let</span><span class="w"> </span><span class="n">distance</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">scene</span><span class="p">.</span><span class="n">evaluate</span><span class="p">(</span><span class="n">sample_point</span><span class="p">).</span><span class="n">distance</span><span class="p">;</span>
<span class="w">        </span><span class="n">occlusion</span><span class="w"> </span><span class="o">+=</span><span class="w"> </span><span class="p">(</span><span class="n">step_size</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="n">i</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="kt">f32</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="n">distance</span><span class="p">)</span><span class="w"> </span><span class="o">/</span><span class="w"> </span><span class="p">(</span><span class="mf">1.0</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">i</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="kt">f32</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="n">i</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="kt">f32</span><span class="p">);</span>
<span class="w">    </span><span class="p">}</span>

<span class="w">    </span><span class="p">(</span><span class="mf">1.0</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="n">occlusion</span><span class="p">).</span><span class="n">max</span><span class="p">(</span><span class="mf">0.0</span><span class="p">).</span><span class="n">min</span><span class="p">(</span><span class="mf">1.0</span><span class="p">)</span>
<span class="p">}</span>
</pre></div>
</div>
</section>
</section>
<section id="integration-examples">
<h2>Integration Examples<a class="headerlink" href="#integration-examples" title="Link to this heading"></a></h2>
<section id="with-existing-mesh-pipeline">
<h3>With Existing Mesh Pipeline<a class="headerlink" href="#with-existing-mesh-pipeline" title="Link to this heading"></a></h3>
<div class="highlight-rust notranslate"><div class="highlight"><pre><span></span><span class="c1">// Combine SDF objects with traditional meshes</span>
<span class="kd">let</span><span class="w"> </span><span class="k">mut</span><span class="w"> </span><span class="n">hybrid_scene</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">HybridScene</span><span class="p">::</span><span class="n">new</span><span class="p">();</span>

<span class="c1">// Add SDF geometry</span>
<span class="n">hybrid_scene</span><span class="p">.</span><span class="n">set_sdf_scene</span><span class="p">(</span><span class="n">procedural_sdf_scene</span><span class="p">);</span>

<span class="c1">// Add mesh geometry from file</span>
<span class="kd">let</span><span class="w"> </span><span class="p">(</span><span class="n">vertices</span><span class="p">,</span><span class="w"> </span><span class="n">indices</span><span class="p">)</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">load_obj_file</span><span class="p">(</span><span class="s">&quot;model.obj&quot;</span><span class="p">)</span><span class="o">?</span><span class="p">;</span>
<span class="kd">let</span><span class="w"> </span><span class="n">bvh</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">build_bvh</span><span class="p">(</span><span class="o">&amp;</span><span class="n">vertices</span><span class="p">,</span><span class="w"> </span><span class="o">&amp;</span><span class="n">indices</span><span class="p">)</span><span class="o">?</span><span class="p">;</span>
<span class="n">hybrid_scene</span><span class="p">.</span><span class="n">add_mesh</span><span class="p">(</span><span class="n">vertices</span><span class="p">,</span><span class="w"> </span><span class="n">indices</span><span class="p">,</span><span class="w"> </span><span class="n">bvh</span><span class="p">)</span><span class="o">?</span><span class="p">;</span>

<span class="c1">// Render both together</span>
<span class="kd">let</span><span class="w"> </span><span class="n">image</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">render_hybrid_scene</span><span class="p">(</span><span class="o">&amp;</span><span class="n">hybrid_scene</span><span class="p">);</span>
</pre></div>
</div>
</section>
<section id="with-path-tracing">
<h3>With Path Tracing<a class="headerlink" href="#with-path-tracing" title="Link to this heading"></a></h3>
<div class="highlight-rust notranslate"><div class="highlight"><pre><span></span><span class="k">use</span><span class="w"> </span><span class="n">forge3d</span><span class="p">::</span><span class="n">path_tracing</span><span class="p">::</span><span class="n">hybrid_compute</span><span class="p">::</span><span class="o">*</span><span class="p">;</span>

<span class="kd">let</span><span class="w"> </span><span class="n">hybrid_tracer</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">HybridPathTracer</span><span class="p">::</span><span class="n">new</span><span class="p">()</span><span class="o">?</span><span class="p">;</span>

<span class="kd">let</span><span class="w"> </span><span class="n">params</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">HybridTracerParams</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="n">base_uniforms</span><span class="p">:</span><span class="w"> </span><span class="nc">create_camera_uniforms</span><span class="p">(</span><span class="n">width</span><span class="p">,</span><span class="w"> </span><span class="n">height</span><span class="p">,</span><span class="w"> </span><span class="n">camera</span><span class="p">),</span>
<span class="w">    </span><span class="n">traversal_mode</span><span class="p">:</span><span class="w"> </span><span class="nc">TraversalMode</span><span class="p">::</span><span class="n">Hybrid</span><span class="p">,</span>
<span class="w">    </span><span class="n">early_exit_distance</span><span class="p">:</span><span class="w"> </span><span class="mf">0.01</span><span class="p">,</span>
<span class="w">    </span><span class="n">shadow_softness</span><span class="p">:</span><span class="w"> </span><span class="mf">4.0</span><span class="p">,</span>
<span class="p">};</span>

<span class="kd">let</span><span class="w"> </span><span class="n">image</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">hybrid_tracer</span><span class="p">.</span><span class="n">render</span><span class="p">(</span><span class="n">width</span><span class="p">,</span><span class="w"> </span><span class="n">height</span><span class="p">,</span><span class="w"> </span><span class="o">&amp;</span><span class="n">spheres</span><span class="p">,</span><span class="w"> </span><span class="o">&amp;</span><span class="n">hybrid_scene</span><span class="p">,</span><span class="w"> </span><span class="n">params</span><span class="p">)</span><span class="o">?</span><span class="p">;</span>
</pre></div>
</div>
</section>
</section>
<section id="future-extensions">
<h2>Future Extensions<a class="headerlink" href="#future-extensions" title="Link to this heading"></a></h2>
<p>The SDF system is designed to be extensible:</p>
<ol class="arabic simple">
<li><p><strong>Additional Primitives</strong>: Easy to add new SDF shapes</p></li>
<li><p><strong>Custom Operations</strong>: Implement domain-specific CSG operations</p></li>
<li><p><strong>Volumetric Rendering</strong>: Extend to volumetric SDFs for clouds, smoke, etc.</p></li>
<li><p><strong>GPU Optimization</strong>: Further WGSL optimizations for specific hardware</p></li>
<li><p><strong>AI Integration</strong>: Use neural SDFs for learned geometry representation</p></li>
</ol>
</section>
<section id="references">
<h2>References<a class="headerlink" href="#references" title="Link to this heading"></a></h2>
<ul class="simple">
<li><p><a class="reference external" href="https://iquilezles.org/articles/distfunctions/">Inigo Quilez - SDF Functions</a></p></li>
<li><p><a class="reference external" href="https://www.shadertoy.com/results?query=tag%3Dsdf">Shadertoy - SDF Examples</a></p></li>
<li><p><a class="reference external" href="https://github.com/electricsquare/raymarching-workshop">Raymarching Workshop</a></p></li>
<li><p><a class="reference external" href="http://www.cs.columbia.edu/cg/pdfs/17_sdf.pdf">Real-Time Rendering of Signed Distance Functions</a></p></li>
</ul>
</section>
</section>


           </div>
          </div>
          <footer>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2025, forge3d contributors.</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>